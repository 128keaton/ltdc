                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.8.0 #5117 (Mar 23 2008) (MINGW32)
                              4 ; This file was generated Mon Jan 24 16:10:14 2011
                              5 ;--------------------------------------------------------
                              6 	.module carwar
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _main
                             13 	.globl _tempName
                             14 	.globl _g_Sprite
                             15 	.globl _MainLoop
                             16 	.globl _SetScreen8
                             17 	.globl _SetPage8
                             18 	.globl _DrawPoint8
                             19 	.globl _DrawLine8
                             20 	.globl _VPDCommand
                             21 	.globl _waitRetrace
                             22 	.globl _WaitForVDP
                             23 	.globl _Joystick
                             24 	.globl _Joytrig
                             25 	.globl _GetKeyMatrixLine
                             26 	.globl _SetTo50Hz
                             27 	.globl _SetTo60Hz
                             28 	.globl _WriteToVRAM8
                             29 	.globl _HMMC
                             30 	.globl _SetupHMMC
                             31 ;--------------------------------------------------------
                             32 ; special function registers
                             33 ;--------------------------------------------------------
                    00A8     34 _g_slotPort	=	0x00a8
                             35 ;--------------------------------------------------------
                             36 ;  ram data
                             37 ;--------------------------------------------------------
                             38 	.area _DATA
                             39 ;--------------------------------------------------------
                             40 ; overlayable items in  ram 
                             41 ;--------------------------------------------------------
                             42 	.area _OVERLAY
                             43 ;--------------------------------------------------------
                             44 ; external initialized ram data
                             45 ;--------------------------------------------------------
                             46 ;--------------------------------------------------------
                             47 ; global & static initialisations
                             48 ;--------------------------------------------------------
                             49 	.area _HOME
                             50 	.area _GSINIT
                             51 	.area _GSFINAL
                             52 	.area _GSINIT
                             53 ;--------------------------------------------------------
                             54 ; Home
                             55 ;--------------------------------------------------------
                             56 	.area _HOME
                             57 	.area _HOME
                             58 ;--------------------------------------------------------
                             59 ; code
                             60 ;--------------------------------------------------------
                             61 	.area _CODE
                             62 ;carwar.c:173: void main(void)
                             63 ;	genLabel
                             64 ;	genFunction
                             65 ;	---------------------------------
                             66 ; Function main
                             67 ; ---------------------------------
   0000                      68 _main_start::
   0000                      69 _main:
                             70 ;carwar.c:179: _endasm;
                             71 ;	genInline
                             72 	
   0000 F3                   73 		 di
   0001 ED 7B 4A FC          74 		 ld sp, (#0xFC4A)
   0005 FB                   75 		 ei
                             76 		
                             77 ;carwar.c:181: g_slotPort = (g_slotPort & 0xCF) | ((g_slotPort & 0x0C) << 2);
                             78 ;	genAnd
                             79 ;Z80 AOP_SFR for _g_slotPort banked:0 bc:1 de:0
   0006 DB A8                80 	in	a,(_g_slotPort)
   0008 E6 CF                81 	and	a,#0xCF
   000A 4F                   82 	ld	c,a
                             83 ;	genAnd
                             84 ;Z80 AOP_SFR for _g_slotPort banked:0 bc:1 de:0
   000B DB A8                85 	in	a,(_g_slotPort)
   000D E6 0C                86 	and	a,#0x0C
   000F 47                   87 	ld	b,a
                             88 ;	genLeftShift
   0010 CB 20                89 	sla	b
   0012 CB 20                90 	sla	b
                             91 ;	genOr
                             92 ;Z80 AOP_SFR for _g_slotPort banked:0 bc:1 de:0
   0014 79                   93 	ld	a,c
   0015 B0                   94 	or	a,b
   0016 D3 A8                95 	out	(_g_slotPort),a
                             96 ;carwar.c:183: MainLoop();
                             97 ;	genCall
                             98 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
                             99 ;	genLabel
                            100 ;	genEndFunction
   0018 C3rEAs00            101 	jp	_MainLoop
   001B                     102 _main_end::
   001B                     103 _g_Sprite:
   001B 00                  104 	.db #0x00
   001C 01                  105 	.db #0x01
   001D 02                  106 	.db #0x02
   001E 03                  107 	.db #0x03
   001F 04                  108 	.db #0x04
   0020 05                  109 	.db #0x05
   0021 06                  110 	.db #0x06
   0022 07                  111 	.db #0x07
   0023 08                  112 	.db #0x08
   0024 09                  113 	.db #0x09
   0025 0A                  114 	.db #0x0A
   0026 0B                  115 	.db #0x0B
   0027 0C                  116 	.db #0x0C
   0028 0D                  117 	.db #0x0D
   0029 0E                  118 	.db #0x0E
   002A 0F                  119 	.db #0x0F
   002B 10                  120 	.db #0x10
   002C 11                  121 	.db #0x11
   002D 12                  122 	.db #0x12
   002E 13                  123 	.db #0x13
   002F 14                  124 	.db #0x14
   0030 15                  125 	.db #0x15
   0031 16                  126 	.db #0x16
   0032 17                  127 	.db #0x17
   0033 18                  128 	.db #0x18
   0034 19                  129 	.db #0x19
   0035 1A                  130 	.db #0x1A
   0036 1B                  131 	.db #0x1B
   0037 1C                  132 	.db #0x1C
   0038 1D                  133 	.db #0x1D
   0039 1E                  134 	.db #0x1E
   003A 1F                  135 	.db #0x1F
   003B 20                  136 	.db #0x20
   003C 21                  137 	.db #0x21
   003D 22                  138 	.db #0x22
   003E 23                  139 	.db #0x23
   003F 24                  140 	.db #0x24
   0040 25                  141 	.db #0x25
   0041 26                  142 	.db #0x26
   0042 27                  143 	.db #0x27
   0043 28                  144 	.db #0x28
   0044 29                  145 	.db #0x29
   0045 2A                  146 	.db #0x2A
   0046 2B                  147 	.db #0x2B
   0047 2C                  148 	.db #0x2C
   0048 2D                  149 	.db #0x2D
   0049 2E                  150 	.db #0x2E
   004A 2F                  151 	.db #0x2F
   004B 30                  152 	.db #0x30
   004C 31                  153 	.db #0x31
   004D 32                  154 	.db #0x32
   004E 33                  155 	.db #0x33
   004F 34                  156 	.db #0x34
   0050 35                  157 	.db #0x35
   0051 36                  158 	.db #0x36
   0052 37                  159 	.db #0x37
   0053 38                  160 	.db #0x38
   0054 39                  161 	.db #0x39
   0055 3A                  162 	.db #0x3A
   0056 3B                  163 	.db #0x3B
   0057 3C                  164 	.db #0x3C
   0058 3D                  165 	.db #0x3D
   0059 3E                  166 	.db #0x3E
   005A 3F                  167 	.db #0x3F
   005B                     168 _tempName:
   005B C2                  169 	.db #0xC2
   005C C2                  170 	.db #0xC2
   005D C2                  171 	.db #0xC2
   005E C2                  172 	.db #0xC2
   005F C2                  173 	.db #0xC2
   0060 C2                  174 	.db #0xC2
   0061 C2                  175 	.db #0xC2
   0062 C2                  176 	.db #0xC2
   0063 C2                  177 	.db #0xC2
   0064 C2                  178 	.db #0xC2
   0065 C2                  179 	.db #0xC2
   0066 C2                  180 	.db #0xC2
   0067 C2                  181 	.db #0xC2
   0068 C2                  182 	.db #0xC2
   0069 C2                  183 	.db #0xC2
   006A C2                  184 	.db #0xC2
   006B C2                  185 	.db #0xC2
   006C C2                  186 	.db #0xC2
   006D C2                  187 	.db #0xC2
   006E C2                  188 	.db #0xC2
   006F C2                  189 	.db #0xC2
   0070 C2                  190 	.db #0xC2
   0071 C2                  191 	.db #0xC2
   0072 C2                  192 	.db #0xC2
   0073 C2                  193 	.db #0xC2
   0074 C2                  194 	.db #0xC2
   0075 C2                  195 	.db #0xC2
   0076 C2                  196 	.db #0xC2
   0077 00                  197 	.db #0x00
   0078 00                  198 	.db #0x00
   0079 00                  199 	.db #0x00
   007A 80                  200 	.db #0x80
   007B 05                  201 	.db #0x05
   007C C2                  202 	.db #0xC2
   007D C2                  203 	.db #0xC2
   007E C2                  204 	.db #0xC2
   007F C2                  205 	.db #0xC2
   0080 C2                  206 	.db #0xC2
   0081 C2                  207 	.db #0xC2
   0082 6D                  208 	.db #0x6D
   0083 49                  209 	.db #0x49
   0084 00                  210 	.db #0x00
   0085 05                  211 	.db #0x05
   0086 00                  212 	.db #0x00
   0087 DF                  213 	.db #0xDF
   0088 05                  214 	.db #0x05
   0089 05                  215 	.db #0x05
   008A 91                  216 	.db #0x91
   008B 92                  217 	.db #0x92
   008C F4                  218 	.db #0xF4
   008D 6D                  219 	.db #0x6D
   008E C2                  220 	.db #0xC2
   008F C2                  221 	.db #0xC2
   0090 00                  222 	.db #0x00
   0091 05                  223 	.db #0x05
   0092 0A                  224 	.db #0x0A
   0093 00                  225 	.db #0x00
   0094 BA                  226 	.db #0xBA
   0095 0F                  227 	.db #0x0F
   0096 0A                  228 	.db #0x0A
   0097 DA                  229 	.db #0xDA
   0098 B6                  230 	.db #0xB6
   0099 49                  231 	.db #0x49
   009A 6D                  232 	.db #0x6D
   009B C2                  233 	.db #0xC2
   009C C2                  234 	.db #0xC2
   009D 00                  235 	.db #0x00
   009E 05                  236 	.db #0x05
   009F 0F                  237 	.db #0x0F
   00A0 00                  238 	.db #0x00
   00A1 E0                  239 	.db #0xE0
   00A2 0A                  240 	.db #0x0A
   00A3 0A                  241 	.db #0x0A
   00A4 DA                  242 	.db #0xDA
   00A5 92                  243 	.db #0x92
   00A6 FC                  244 	.db #0xFC
   00A7 6D                  245 	.db #0x6D
   00A8 C2                  246 	.db #0xC2
   00A9 C2                  247 	.db #0xC2
   00AA 00                  248 	.db #0x00
   00AB 00                  249 	.db #0x00
   00AC 00                  250 	.db #0x00
   00AD 00                  251 	.db #0x00
   00AE 00                  252 	.db #0x00
   00AF 00                  253 	.db #0x00
   00B0 92                  254 	.db #0x92
   00B1 DA                  255 	.db #0xDA
   00B2 DA                  256 	.db #0xDA
   00B3 DA                  257 	.db #0xDA
   00B4 91                  258 	.db #0x91
   00B5 C2                  259 	.db #0xC2
   00B6 C2                  260 	.db #0xC2
   00B7 00                  261 	.db #0x00
   00B8 00                  262 	.db #0x00
   00B9 00                  263 	.db #0x00
   00BA 00                  264 	.db #0x00
   00BB 00                  265 	.db #0x00
   00BC 49                  266 	.db #0x49
   00BD 6D                  267 	.db #0x6D
   00BE 6D                  268 	.db #0x6D
   00BF 00                  269 	.db #0x00
   00C0 00                  270 	.db #0x00
   00C1 6D                  271 	.db #0x6D
   00C2 C2                  272 	.db #0xC2
   00C3 C2                  273 	.db #0xC2
   00C4 C2                  274 	.db #0xC2
   00C5 00                  275 	.db #0x00
   00C6 00                  276 	.db #0x00
   00C7 C2                  277 	.db #0xC2
   00C8 C2                  278 	.db #0xC2
   00C9 C2                  279 	.db #0xC2
   00CA C2                  280 	.db #0xC2
   00CB C2                  281 	.db #0xC2
   00CC 00                  282 	.db #0x00
   00CD 00                  283 	.db #0x00
   00CE C2                  284 	.db #0xC2
   00CF C2                  285 	.db #0xC2
   00D0 C2                  286 	.db #0xC2
   00D1 C2                  287 	.db #0xC2
   00D2 C2                  288 	.db #0xC2
   00D3 C2                  289 	.db #0xC2
   00D4 C2                  290 	.db #0xC2
   00D5 C2                  291 	.db #0xC2
   00D6 C2                  292 	.db #0xC2
   00D7 C2                  293 	.db #0xC2
   00D8 C2                  294 	.db #0xC2
   00D9 C2                  295 	.db #0xC2
   00DA C2                  296 	.db #0xC2
   00DB C2                  297 	.db #0xC2
   00DC C2                  298 	.db #0xC2
   00DD C2                  299 	.db #0xC2
   00DE C2                  300 	.db #0xC2
   00DF C2                  301 	.db #0xC2
   00E0 C2                  302 	.db #0xC2
   00E1 C2                  303 	.db #0xC2
   00E2 C2                  304 	.db #0xC2
   00E3 C2                  305 	.db #0xC2
   00E4 C2                  306 	.db #0xC2
   00E5 C2                  307 	.db #0xC2
   00E6 C2                  308 	.db #0xC2
   00E7 C2                  309 	.db #0xC2
   00E8 C2                  310 	.db #0xC2
   00E9 C2                  311 	.db #0xC2
                            312 ;carwar.c:192: void MainLoop()
                            313 ;	genLabel
                            314 ;	genFunction
                            315 ;	---------------------------------
                            316 ; Function MainLoop
                            317 ; ---------------------------------
   00EA                     318 _MainLoop_start::
   00EA                     319 _MainLoop:
   00EA DD E5               320 	push	ix
   00EC DD 21 00 00         321 	ld	ix,#0
   00F0 DD 39               322 	add	ix,sp
   00F2 21 E9 FF            323 	ld	hl,#-23
   00F5 39                  324 	add	hl,sp
   00F6 F9                  325 	ld	sp,hl
                            326 ;carwar.c:194: u8 clsScreen8[15] = 
                            327 ;	genAddrOf
   00F7 21 08 00            328 	ld	hl,#0x0008
   00FA 39                  329 	add	hl,sp
   00FB 4D                  330 	ld	c,l
   00FC 44                  331 	ld	b,h
                            332 ;	genArrayInit
                            333 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 1 deSending: 0
   00FD C5                  334 	push	bc
   00FE 69                  335 	ld	l,c
   00FF 60                  336 	ld	h,b
   0100 CDr00s00            337 	call	__initrleblock
   0103 F7 00               338 	.db	#-9,#0x00
   0105 06                  339 	.db	6
   0106 01 D4 00 00 00 C0   340 	.db	0x01, 0xD4, 0x00, 0x00, 0x00, 0xC0
   010C 00                  341 	.db	0
   010D C1                  342 	pop	bc
                            343 ;carwar.c:199: u8 x = 128, y = 128;
                            344 ;	genAssign
                            345 ;	AOP_STK for _MainLoop_x_1_1
   010E DD 36 F0 80         346 	ld	-16(ix),#0x80
                            347 ;	genAssign
                            348 ;	AOP_STK for _MainLoop_y_1_1
   0112 DD 36 EF 80         349 	ld	-17(ix),#0x80
                            350 ;carwar.c:221: SetTo60Hz();
                            351 ;	genCall
                            352 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0116 CDr4Ds04            353 	call	_SetTo60Hz
                            354 ;carwar.c:222: SetScreen8();
                            355 ;	genCall
                            356 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0119 CDr0Cs03            357 	call	_SetScreen8
                            358 ;carwar.c:226: VPDCommand((int)&clsScreen8);
                            359 ;	genAddrOf
   011C 21 08 00            360 	ld	hl,#0x0008
   011F 39                  361 	add	hl,sp
   0120 5D                  362 	ld	e,l
   0121 54                  363 	ld	d,h
                            364 ;	genCast
                            365 ;	genIpush
                            366 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0122 D5                  367 	push	de
                            368 ;	genCall
   0123 CDrA6s03            369 	call	_VPDCommand
   0126 F1                  370 	pop	af
                            371 ;carwar.c:228: while(bEnd == 0)
                            372 ;	genLabel
   0127                     373 00115$:
                            374 ;carwar.c:238: addr = x + (y << 8);
                            375 ;	genCast
                            376 ;	AOP_STK for _MainLoop_x_1_1
   0127 DD 5E F0            377 	ld	e,-16(ix)
   012A 16 00               378 	ld	d,#0x00
                            379 ;	genCast
                            380 ;	AOP_STK for _MainLoop_y_1_1
   012C DD 46 EF            381 	ld	b,-17(ix)
                            382 ;	genLeftShift
   012F 48                  383 	ld	c,b
   0130 06 00               384 	ld	b,#0x00
                            385 ;	genPlus
   0132 7B                  386 	ld	a,e
   0133 80                  387 	add	a,b
   0134 47                  388 	ld	b,a
   0135 7A                  389 	ld	a,d
   0136 89                  390 	adc	a,c
   0137 4F                  391 	ld	c,a
                            392 ;	genAssign
                            393 ;	(registers are the same)
                            394 ;carwar.c:239: WriteToVRAM8(addr, 0x0F);
                            395 ;	genIpush
                            396 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0138 3E 0F               397 	ld	a,#0x0F
   013A F5                  398 	push	af
   013B 33                  399 	inc	sp
                            400 ;	genIpush
   013C 68                  401 	ld	l,b
   013D 61                  402 	ld	h,c
   013E E5                  403 	push	hl
                            404 ;	genCall
   013F CDr5Bs04            405 	call	_WriteToVRAM8
   0142 F1                  406 	pop	af
   0143 33                  407 	inc	sp
                            408 ;carwar.c:240: HMMC(0, 100, 100, 8, 8, (u16)&g_Sprite);
                            409 ;	genCast
   0144 0Er1B               410 	ld	c,#<_g_Sprite
   0146 06s00               411 	ld	b,#>_g_Sprite
                            412 ;	genIpush
                            413 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0148 C5                  414 	push	bc
                            415 ;	genIpush
   0149 21 08 08            416 	ld	hl,#0x0808
   014C E5                  417 	push	hl
                            418 ;	genIpush
   014D 21 64 64            419 	ld	hl,#0x6464
   0150 E5                  420 	push	hl
                            421 ;	genIpush
   0151 3E 00               422 	ld	a,#0x00
   0153 F5                  423 	push	af
   0154 33                  424 	inc	sp
                            425 ;	genCall
   0155 CDr8Bs04            426 	call	_HMMC
   0158 F1                  427 	pop	af
   0159 F1                  428 	pop	af
   015A F1                  429 	pop	af
   015B 33                  430 	inc	sp
                            431 ;carwar.c:241: HMMC(0, 50, 100, 13, 11, (u16)&tempName);
                            432 ;	genCast
   015C 0Er5B               433 	ld	c,#<_tempName
   015E 06s00               434 	ld	b,#>_tempName
                            435 ;	genIpush
                            436 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0160 C5                  437 	push	bc
                            438 ;	genIpush
   0161 21 0D 0B            439 	ld	hl,#0x0B0D
   0164 E5                  440 	push	hl
                            441 ;	genIpush
   0165 21 32 64            442 	ld	hl,#0x6432
   0168 E5                  443 	push	hl
                            444 ;	genIpush
   0169 3E 00               445 	ld	a,#0x00
   016B F5                  446 	push	af
   016C 33                  447 	inc	sp
                            448 ;	genCall
   016D CDr8Bs04            449 	call	_HMMC
   0170 F1                  450 	pop	af
   0171 F1                  451 	pop	af
   0172 F1                  452 	pop	af
   0173 33                  453 	inc	sp
                            454 ;carwar.c:245: if((i = Joystick(0) | Joystick(1) | Joystick(2)) != 0)
                            455 ;	genIpush
                            456 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0174 3E 00               457 	ld	a,#0x00
   0176 F5                  458 	push	af
   0177 33                  459 	inc	sp
                            460 ;	genCall
   0178 CDr07s04            461 	call	_Joystick
   017B 4D                  462 	ld	c,l
   017C 33                  463 	inc	sp
                            464 ;	genIpush
                            465 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 1 deSending: 0
   017D C5                  466 	push	bc
   017E 3E 01               467 	ld	a,#0x01
   0180 F5                  468 	push	af
   0181 33                  469 	inc	sp
                            470 ;	genCall
   0182 CDr07s04            471 	call	_Joystick
   0185 45                  472 	ld	b,l
   0186 33                  473 	inc	sp
   0187 78                  474 	ld	a,b
   0188 C1                  475 	pop	bc
                            476 ;	genOr
   0189 47                  477 	ld	b,a
   018A B1                  478 	or	a,c
   018B 4F                  479 	ld	c,a
                            480 ;	genIpush
                            481 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 1 deSending: 0
   018C C5                  482 	push	bc
   018D 3E 02               483 	ld	a,#0x02
   018F F5                  484 	push	af
   0190 33                  485 	inc	sp
                            486 ;	genCall
   0191 CDr07s04            487 	call	_Joystick
   0194 45                  488 	ld	b,l
   0195 33                  489 	inc	sp
   0196 78                  490 	ld	a,b
   0197 C1                  491 	pop	bc
                            492 ;	genOr
   0198 47                  493 	ld	b,a
   0199 B1                  494 	or	a,c
                            495 ;	genCast
   019A 4F                  496 	ld	c,a
   019B 17                  497 	rla	
   019C 9F                  498 	sbc	a,a
   019D 47                  499 	ld	b,a
                            500 ;	genAssign
   019E 59                  501 	ld	e,c
   019F 50                  502 	ld	d,b
                            503 ;	genIfx
   01A0 79                  504 	ld	a,c
   01A1 B0                  505 	or	a,b
   01A2 CAr11s02            506 	jp	Z,00111$
                            507 ;carwar.c:247: switch (i)
                            508 ;	genCmpLt
   01A5 7B                  509 	ld	a,e
   01A6 D6 01               510 	sub	a,#0x01
   01A8 7A                  511 	ld	a,d
   01A9 DE 00               512 	sbc	a,#0x00
   01AB FAr11s02            513 	jp	M,00111$
                            514 ;	genCmpGt
   01AE 3E 08               515 	ld	a,#0x08
   01B0 93                  516 	sub	a,e
   01B1 3E 00               517 	ld	a,#0x00
   01B3 9A                  518 	sbc	a,d
   01B4 FAr11s02            519 	jp	M,00111$
                            520 ;	genMinus
   01B7 7B                  521 	ld	a,e
   01B8 C6 FF               522 	add	a,#0xFF
   01BA 4F                  523 	ld	c,a
                            524 ;	genJumpTab
   01BB D5                  525 	push	de
   01BC 59                  526 	ld	e,c
   01BD 16 00               527 	ld	d,#0x00
   01BF 21rC7s01            528 	ld	hl,#00146$
   01C2 19                  529 	add	hl,de
   01C3 19                  530 	add	hl,de
   01C4 19                  531 	add	hl,de
   01C5 D1                  532 	pop	de
   01C6 E9                  533 	jp	(hl)
   01C7                     534 00146$:
   01C7 C3rDFs01            535 	jp	00101$
   01CA C3rE4s01            536 	jp	00102$
   01CD C3rECs01            537 	jp	00103$
   01D0 C3rF1s01            538 	jp	00104$
   01D3 C3rF9s01            539 	jp	00105$
   01D6 C3rFEs01            540 	jp	00106$
   01D9 C3r06s02            541 	jp	00107$
   01DC C3r0Bs02            542 	jp	00108$
                            543 ;carwar.c:249: case 1: y--; break;
                            544 ;	genLabel
   01DF                     545 00101$:
                            546 ;	genMinus
                            547 ;	AOP_STK for _MainLoop_y_1_1
   01DF DD 35 EF            548 	dec	-17(ix)
                            549 ;	genGoto
   01E2 18 2D               550 	jr	00111$
                            551 ;carwar.c:250: case 2: y--; x++; break;
                            552 ;	genLabel
   01E4                     553 00102$:
                            554 ;	genMinus
                            555 ;	AOP_STK for _MainLoop_y_1_1
   01E4 DD 35 EF            556 	dec	-17(ix)
                            557 ;	genPlus
                            558 ;	AOP_STK for _MainLoop_x_1_1
                            559 ;	genPlusIncr
   01E7 DD 34 F0            560 	inc	-16(ix)
                            561 ;	genGoto
   01EA 18 25               562 	jr	00111$
                            563 ;carwar.c:251: case 3: x++; break;
                            564 ;	genLabel
   01EC                     565 00103$:
                            566 ;	genPlus
                            567 ;	AOP_STK for _MainLoop_x_1_1
                            568 ;	genPlusIncr
   01EC DD 34 F0            569 	inc	-16(ix)
                            570 ;	genGoto
   01EF 18 20               571 	jr	00111$
                            572 ;carwar.c:252: case 4: y++; x++; break;
                            573 ;	genLabel
   01F1                     574 00104$:
                            575 ;	genPlus
                            576 ;	AOP_STK for _MainLoop_y_1_1
                            577 ;	genPlusIncr
   01F1 DD 34 EF            578 	inc	-17(ix)
                            579 ;	genPlus
                            580 ;	AOP_STK for _MainLoop_x_1_1
                            581 ;	genPlusIncr
   01F4 DD 34 F0            582 	inc	-16(ix)
                            583 ;	genGoto
   01F7 18 18               584 	jr	00111$
                            585 ;carwar.c:253: case 5: y++; break;
                            586 ;	genLabel
   01F9                     587 00105$:
                            588 ;	genPlus
                            589 ;	AOP_STK for _MainLoop_y_1_1
                            590 ;	genPlusIncr
   01F9 DD 34 EF            591 	inc	-17(ix)
                            592 ;	genGoto
   01FC 18 13               593 	jr	00111$
                            594 ;carwar.c:254: case 6: y++; x--; break;
                            595 ;	genLabel
   01FE                     596 00106$:
                            597 ;	genPlus
                            598 ;	AOP_STK for _MainLoop_y_1_1
                            599 ;	genPlusIncr
   01FE DD 34 EF            600 	inc	-17(ix)
                            601 ;	genMinus
                            602 ;	AOP_STK for _MainLoop_x_1_1
   0201 DD 35 F0            603 	dec	-16(ix)
                            604 ;	genGoto
   0204 18 0B               605 	jr	00111$
                            606 ;carwar.c:255: case 7: x--; break;
                            607 ;	genLabel
   0206                     608 00107$:
                            609 ;	genMinus
                            610 ;	AOP_STK for _MainLoop_x_1_1
   0206 DD 35 F0            611 	dec	-16(ix)
                            612 ;	genGoto
   0209 18 06               613 	jr	00111$
                            614 ;carwar.c:256: case 8: y--; x--; break;
                            615 ;	genLabel
   020B                     616 00108$:
                            617 ;	genMinus
                            618 ;	AOP_STK for _MainLoop_y_1_1
   020B DD 35 EF            619 	dec	-17(ix)
                            620 ;	genMinus
                            621 ;	AOP_STK for _MainLoop_x_1_1
   020E DD 35 F0            622 	dec	-16(ix)
                            623 ;carwar.c:257: }
                            624 ;	genLabel
   0211                     625 00111$:
                            626 ;carwar.c:285: for(i=0; i<10; i++) // rows
                            627 ;	genAssign
   0211 11 00 00            628 	ld	de,#0x0000
                            629 ;	genAssign
                            630 ;	AOP_STK for _MainLoop_i_1_1
   0214 DD 36 ED 00         631 	ld	-19(ix),#0x00
   0218 DD 36 EE 00         632 	ld	-18(ix),#0x00
                            633 ;	genLabel
   021C                     634 00122$:
                            635 ;	genCmpLt
                            636 ;	AOP_STK for _MainLoop_i_1_1
   021C DD 7E ED            637 	ld	a,-19(ix)
   021F D6 0A               638 	sub	a,#0x0A
   0221 DD 7E EE            639 	ld	a,-18(ix)
   0224 DE 00               640 	sbc	a,#0x00
   0226 F2rCFs02            641 	jp	P,00145$
                            642 ;carwar.c:287: keyLine = GetKeyMatrixLine(i);
                            643 ;	genCast
                            644 ;	AOP_STK for _MainLoop_i_1_1
   0229 DD 4E ED            645 	ld	c,-19(ix)
                            646 ;	genIpush
                            647 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   022C 79                  648 	ld	a,c
   022D F5                  649 	push	af
   022E 33                  650 	inc	sp
                            651 ;	genCall
   022F CDr2Ds04            652 	call	_GetKeyMatrixLine
   0232 4D                  653 	ld	c,l
   0233 33                  654 	inc	sp
                            655 ;	genAssign
   0234 59                  656 	ld	e,c
                            657 ;carwar.c:288: for(j=0; j<8; j++) // characters
                            658 ;	genAssign
                            659 ;	AOP_STK for _MainLoop_j_1_1
   0235 DD 36 EB 00         660 	ld	-21(ix),#0x00
   0239 DD 36 EC 00         661 	ld	-20(ix),#0x00
                            662 ;	genLabel
   023D                     663 00118$:
                            664 ;	genCmpLt
                            665 ;	AOP_STK for _MainLoop_j_1_1
   023D DD 7E EB            666 	ld	a,-21(ix)
   0240 D6 08               667 	sub	a,#0x08
   0242 DD 7E EC            668 	ld	a,-20(ix)
   0245 DE 00               669 	sbc	a,#0x00
   0247 F2rBEs02            670 	jp	P,00124$
                            671 ;carwar.c:290: if(keyLine & 1 << j)
                            672 ;	genLeftShift
                            673 ;	AOP_STK for _MainLoop_j_1_1
   024A DD 7E EB            674 	ld	a,-21(ix)
   024D 3C                  675 	inc	a
                            676 ;	AOP_STK for _MainLoop_sloc0_1_0
   024E F5                  677 	push	af
   024F DD 36 E9 01         678 	ld	-23(ix),#0x01
   0253 DD 36 EA 00         679 	ld	-22(ix),#0x00
   0257 F1                  680 	pop	af
   0258 18 08               681 	jr	00148$
   025A                     682 00147$:
   025A DD CB E9 26         683 	sla	-23(ix)
   025E DD CB EA 16         684 	rl	-22(ix)
   0262                     685 00148$:
   0262 3D                  686 	dec	a
   0263 20 F5               687 	jr	NZ,00147$
                            688 ;	genCast
   0265 4B                  689 	ld	c,e
   0266 06 00               690 	ld	b,#0x00
                            691 ;	genAnd
                            692 ;	AOP_STK for _MainLoop_sloc0_1_0
   0268 79                  693 	ld	a,c
   0269 DD A6 E9            694 	and	a,-23(ix)
   026C 4F                  695 	ld	c,a
   026D 78                  696 	ld	a,b
   026E DD A6 EA            697 	and	a,-22(ix)
                            698 ;	genIfx
   0271 47                  699 	ld	b,a
   0272 B1                  700 	or	a,c
   0273 28 20               701 	jr	Z,00113$
                            702 ;carwar.c:291: DrawPoint8(10 + j, 10 + i, 0);
                            703 ;	genCast
                            704 ;	AOP_STK for _MainLoop_i_1_1
   0275 DD 4E ED            705 	ld	c,-19(ix)
                            706 ;	genPlus
                            707 ;	genPlusIncr
   0278 79                  708 	ld	a,c
   0279 C6 0A               709 	add	a,#0x0A
   027B 4F                  710 	ld	c,a
                            711 ;	genCast
                            712 ;	AOP_STK for _MainLoop_j_1_1
   027C DD 46 EB            713 	ld	b,-21(ix)
                            714 ;	genPlus
                            715 ;	genPlusIncr
   027F 78                  716 	ld	a,b
   0280 C6 0A               717 	add	a,#0x0A
   0282 47                  718 	ld	b,a
                            719 ;	genIpush
                            720 ; _saveRegsForCall: sendSetSize: 0 deInUse: 1 bcInUse: 0 deSending: 0
   0283 D5                  721 	push	de
   0284 3E 00               722 	ld	a,#0x00
   0286 F5                  723 	push	af
   0287 33                  724 	inc	sp
                            725 ;	genIpush
   0288 79                  726 	ld	a,c
   0289 F5                  727 	push	af
   028A 33                  728 	inc	sp
                            729 ;	genIpush
   028B C5                  730 	push	bc
   028C 33                  731 	inc	sp
                            732 ;	genCall
   028D CDr51s03            733 	call	_DrawPoint8
   0290 F1                  734 	pop	af
   0291 33                  735 	inc	sp
   0292 D1                  736 	pop	de
                            737 ;	genGoto
   0293 18 1E               738 	jr	00120$
                            739 ;	genLabel
   0295                     740 00113$:
                            741 ;carwar.c:293: DrawPoint8(10 + j, 10 + i, 255);
                            742 ;	genCast
                            743 ;	AOP_STK for _MainLoop_i_1_1
   0295 DD 4E ED            744 	ld	c,-19(ix)
                            745 ;	genPlus
                            746 ;	genPlusIncr
   0298 79                  747 	ld	a,c
   0299 C6 0A               748 	add	a,#0x0A
   029B 4F                  749 	ld	c,a
                            750 ;	genCast
                            751 ;	AOP_STK for _MainLoop_j_1_1
   029C DD 46 EB            752 	ld	b,-21(ix)
                            753 ;	genPlus
                            754 ;	genPlusIncr
   029F 78                  755 	ld	a,b
   02A0 C6 0A               756 	add	a,#0x0A
   02A2 47                  757 	ld	b,a
                            758 ;	genIpush
                            759 ; _saveRegsForCall: sendSetSize: 0 deInUse: 1 bcInUse: 0 deSending: 0
   02A3 D5                  760 	push	de
   02A4 3E FF               761 	ld	a,#0xFF
   02A6 F5                  762 	push	af
   02A7 33                  763 	inc	sp
                            764 ;	genIpush
   02A8 79                  765 	ld	a,c
   02A9 F5                  766 	push	af
   02AA 33                  767 	inc	sp
                            768 ;	genIpush
   02AB C5                  769 	push	bc
   02AC 33                  770 	inc	sp
                            771 ;	genCall
   02AD CDr51s03            772 	call	_DrawPoint8
   02B0 F1                  773 	pop	af
   02B1 33                  774 	inc	sp
   02B2 D1                  775 	pop	de
                            776 ;	genLabel
   02B3                     777 00120$:
                            778 ;carwar.c:288: for(j=0; j<8; j++) // characters
                            779 ;	genPlus
                            780 ;	AOP_STK for _MainLoop_j_1_1
                            781 ;	genPlusIncr
   02B3 DD 34 EB            782 	inc	-21(ix)
   02B6 20 03               783 	jr	NZ,00149$
   02B8 DD 34 EC            784 	inc	-20(ix)
   02BB                     785 00149$:
                            786 ;	genGoto
   02BB C3r3Ds02            787 	jp	00118$
                            788 ;	genLabel
   02BE                     789 00124$:
                            790 ;carwar.c:285: for(i=0; i<10; i++) // rows
                            791 ;	genPlus
                            792 ;	AOP_STK for _MainLoop_i_1_1
                            793 ;	genPlusIncr
   02BE DD 34 ED            794 	inc	-19(ix)
   02C1 20 03               795 	jr	NZ,00150$
   02C3 DD 34 EE            796 	inc	-18(ix)
   02C6                     797 00150$:
                            798 ;	genAssign
                            799 ;	AOP_STK for _MainLoop_i_1_1
   02C6 DD 5E ED            800 	ld	e,-19(ix)
   02C9 DD 56 EE            801 	ld	d,-18(ix)
                            802 ;	genGoto
   02CC C3r1Cs02            803 	jp	00122$
                            804 ;	genLabel
   02CF                     805 00145$:
                            806 ;	genAssign
                            807 ;	AOP_STK for _MainLoop_i_1_1
   02CF DD 5E ED            808 	ld	e,-19(ix)
   02D2 DD 56 EE            809 	ld	d,-18(ix)
                            810 ;carwar.c:299: for(j=0; j<256; j++) // characters
                            811 ;	genAssign
                            812 ;	AOP_STK for _MainLoop_j_1_1
   02D5 DD 36 EB 00         813 	ld	-21(ix),#0x00
   02D9 DD 36 EC 00         814 	ld	-20(ix),#0x00
                            815 ;	genLabel
   02DD                     816 00126$:
                            817 ;	genCmpLt
                            818 ;	AOP_STK for _MainLoop_j_1_1
   02DD DD 7E EB            819 	ld	a,-21(ix)
   02E0 D6 00               820 	sub	a,#0x00
   02E2 DD 7E EC            821 	ld	a,-20(ix)
   02E5 DE 01               822 	sbc	a,#0x01
   02E7 F2r27s01            823 	jp	P,00115$
                            824 ;carwar.c:301: DrawPoint8(j, i, j);
                            825 ;	genCast
                            826 ;	AOP_STK for _MainLoop_j_1_1
   02EA DD 4E EB            827 	ld	c,-21(ix)
                            828 ;	genCast
   02ED 43                  829 	ld	b,e
                            830 ;	genIpush
                            831 ; _saveRegsForCall: sendSetSize: 0 deInUse: 1 bcInUse: 0 deSending: 0
   02EE D5                  832 	push	de
   02EF 79                  833 	ld	a,c
   02F0 F5                  834 	push	af
   02F1 33                  835 	inc	sp
                            836 ;	genIpush
   02F2 C5                  837 	push	bc
   02F3 33                  838 	inc	sp
                            839 ;	genIpush
   02F4 79                  840 	ld	a,c
   02F5 F5                  841 	push	af
   02F6 33                  842 	inc	sp
                            843 ;	genCall
   02F7 CDr51s03            844 	call	_DrawPoint8
   02FA F1                  845 	pop	af
   02FB 33                  846 	inc	sp
   02FC D1                  847 	pop	de
                            848 ;carwar.c:299: for(j=0; j<256; j++) // characters
                            849 ;	genPlus
                            850 ;	AOP_STK for _MainLoop_j_1_1
                            851 ;	genPlusIncr
   02FD DD 34 EB            852 	inc	-21(ix)
   0300 20 03               853 	jr	NZ,00151$
   0302 DD 34 EC            854 	inc	-20(ix)
   0305                     855 00151$:
                            856 ;	genGoto
   0305 18 D6               857 	jr	00126$
                            858 ;	genLabel
                            859 ;	genEndFunction
   0307 DD F9               860 	ld	sp,ix
   0309 DD E1               861 	pop	ix
   030B C9                  862 	ret
   030C                     863 _MainLoop_end::
                            864 ;carwar.c:456: void SetScreen8()
                            865 ;	genLabel
                            866 ;	genFunction
                            867 ;	---------------------------------
                            868 ; Function SetScreen8
                            869 ; ---------------------------------
   030C                     870 _SetScreen8_start::
   030C                     871 _SetScreen8:
                            872 ;carwar.c:492: _endasm;
                            873 ;	genInline
                            874 	
                            875 	
                            876 	
                            877 	
   030C 3A DF F3            878 		 ld a,(#0xF3DF)
   030F CB DF               879 		 set #3,a
   0311 CB D7               880 		 set #2,a
   0313 CB CF               881 		 set #1,a
   0315 32 DF F3            882 		 ld (#0xF3DF),a
                            883 	
   0318 F3                  884 		 di
                            885 	
   0319 D3 99               886 		 out (#0x99),a
   031B 3E 80               887 		 ld a,#(0x80+0)
   031D D3 99               888 		 out (#0x99),a
                            889 	
                            890 	
   031F 3A E0 F3            891 		 ld a,(#0xF3E0)
   0322 CB A7               892 		 res #4,a
   0324 CB 9F               893 		 res #3,a
   0326 32 E0 F3            894 		 ld (#0xF3E0),a
                            895 	
   0329 D3 99               896 		 out (#0x99),a
   032B 3E 81               897 		 ld a,#(0x80+1)
   032D D3 99               898 		 out (#0x99),a
                            899 	
                            900 	
   032F 3E 1F               901 		 ld a,#0x1F
   0331 D3 99               902 		 out (#0x99),a
   0333 3E 82               903 		 ld a,#(0x80+2)
   0335 D3 99               904 		 out (#0x99),a
                            905 	
   0337 FB                  906 		 ei
                            907 	
                            908 		
                            909 ;	genLabel
                            910 ;	genEndFunction
   0338 C9                  911 	ret
   0339                     912 _SetScreen8_end::
                            913 ;carwar.c:498: void SetPage8(i8 page)
                            914 ;	genLabel
                            915 ;	genFunction
                            916 ;	---------------------------------
                            917 ; Function SetPage8
                            918 ; ---------------------------------
   0339                     919 _SetPage8_start::
   0339                     920 _SetPage8:
   0339 DD E5               921 	push	ix
   033B DD 21 00 00         922 	ld	ix,#0
   033F DD 39               923 	add	ix,sp
                            924 ;carwar.c:512: _endasm;
                            925 ;	genInline
                            926 	
                            927 	
   0341 DD 7E 04            928 		 ld a,4(ix)
   0344 F6 1F               929 		 or #0x1F
   0346 F3                  930 		 di
   0347 D3 99               931 		 out (#0x99),a
   0349 3E 82               932 		 ld a,#(0x80+2)
   034B D3 99               933 		 out (#0x99),a
   034D FB                  934 		 ei
                            935 	
                            936 		
                            937 ;	genLabel
                            938 ;	genEndFunction
   034E DD E1               939 	pop	ix
   0350 C9                  940 	ret
   0351                     941 _SetPage8_end::
                            942 ;carwar.c:518: void DrawPoint8(char posX, char posY, char color)
                            943 ;	genLabel
                            944 ;	genFunction
                            945 ;	---------------------------------
                            946 ; Function DrawPoint8
                            947 ; ---------------------------------
   0351                     948 _DrawPoint8_start::
   0351                     949 _DrawPoint8:
   0351 DD E5               950 	push	ix
   0353 DD 21 00 00         951 	ld	ix,#0
   0357 DD 39               952 	add	ix,sp
                            953 ;carwar.c:522: WaitForVDP();
                            954 ;	genCall
                            955 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0359 CDrEFs03            956 	call	_WaitForVDP
                            957 ;carwar.c:570: _endasm;
                            958 ;	genInline
                            959 	
                            960 	
                            961 	
                            962 	
   035C DD 7E 04            963 		 ld a,4(ix)
   035F F3                  964 		 di
   0360 D3 99               965 		 out (#0x99),a
   0362 3E A4               966 		 ld a,#(0x80+36)
   0364 D3 99               967 		 out (#0x99),a
                            968 	
   0366 AF                  969 		 xor a
   0367 D3 99               970 		 out (#0x99),a
   0369 3E A5               971 		 ld a,#(0x80+37)
   036B D3 99               972 		 out (#0x99),a
                            973 	
                            974 	
   036D DD 7E 05            975 		 ld a,5(ix)
   0370 D3 99               976 		 out (#0x99),a
   0372 3E A6               977 		 ld a,#(0x80+38)
   0374 D3 99               978 		 out (#0x99),a
                            979 	
   0376 AF                  980 		 xor a
   0377 D3 99               981 		 out (#0x99),a
   0379 3E A7               982 		 ld a,#(0x80+39)
   037B D3 99               983 		 out (#0x99),a
                            984 	
                            985 	
   037D DD 7E 06            986 		 ld a,6(ix)
   0380 D3 99               987 		 out (#0x99),a
   0382 3E AC               988 		 ld a,#(0x80+44)
   0384 D3 99               989 		 out (#0x99),a
                            990 	
                            991 	
   0386 AF                  992 		 xor a
   0387 D3 99               993 		 out (#0x99),a
   0389 3E AD               994 		 ld a,#(0x80+45)
   038B D3 99               995 		 out (#0x99),a
                            996 	
                            997 	
   038D 3E 50               998 		 ld a,#0x50
   038F D3 99               999 		 out (#0x99),a
   0391 3E AE              1000 		 ld a,#(0x80+46)
   0393 D3 99              1001 		 out (#0x99),a
                           1002 	
   0395 FB                 1003 		 ei
                           1004 	
                           1005 		
                           1006 ;	genLabel
                           1007 ;	genEndFunction
   0396 DD E1              1008 	pop	ix
   0398 C9                 1009 	ret
   0399                    1010 _DrawPoint8_end::
                           1011 ;carwar.c:672: void DrawLine8(char posX1, char posY1, char posX2, char posY2, char color)
                           1012 ;	genLabel
                           1013 ;	genFunction
                           1014 ;	---------------------------------
                           1015 ; Function DrawLine8
                           1016 ; ---------------------------------
   0399                    1017 _DrawLine8_start::
   0399                    1018 _DrawLine8:
   0399 DD E5              1019 	push	ix
   039B DD 21 00 00        1020 	ld	ix,#0
   039F DD 39              1021 	add	ix,sp
                           1022 ;carwar.c:676: WaitForVDP();
                           1023 ;	genCall
                           1024 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
                           1025 ;	genLabel
                           1026 ;	genEndFunction
   03A1 DD E1              1027 	pop	ix
   03A3 C3rEFs03           1028 	jp	_WaitForVDP
   03A6                    1029 _DrawLine8_end::
                           1030 ;carwar.c:810: void VPDCommand(int address)
                           1031 ;	genLabel
                           1032 ;	genFunction
                           1033 ;	---------------------------------
                           1034 ; Function VPDCommand
                           1035 ; ---------------------------------
   03A6                    1036 _VPDCommand_start::
   03A6                    1037 _VPDCommand:
   03A6 DD E5              1038 	push	ix
   03A8 DD 21 00 00        1039 	ld	ix,#0
   03AC DD 39              1040 	add	ix,sp
                           1041 ;carwar.c:814: WaitForVDP();
                           1042 ;	genCall
                           1043 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   03AE CDrEFs03           1044 	call	_WaitForVDP
                           1045 ;carwar.c:845: _endasm;
                           1046 ;	genInline
                           1047 	
                           1048 	
   03B1 DD 6E 04           1049 		 ld l,4(ix)
   03B4 DD 66 05           1050 		 ld h,5(ix)
                           1051 	
                           1052 	
   03B7 3E 20              1053 		 ld a,#32
   03B9 F3                 1054 		 di
   03BA D3 99              1055 		 out (#0x99),a
   03BC 3E 91              1056 		 ld a,#(0x80+17)
   03BE D3 99              1057 		 out (#0x99),a
   03C0 0E 9B              1058 		 ld c,#0x99 +#2
   03C2 ED A3              1059 		 outi
   03C4 ED A3              1060 		 outi
   03C6 ED A3              1061 		 outi
   03C8 ED A3              1062 		 outi
   03CA ED A3              1063 		 outi
   03CC ED A3              1064 		 outi
   03CE ED A3              1065 		 outi
   03D0 ED A3              1066 		 outi
   03D2 ED A3              1067 		 outi
   03D4 ED A3              1068 		 outi
   03D6 ED A3              1069 		 outi
   03D8 ED A3              1070 		 outi
   03DA ED A3              1071 		 outi
   03DC ED A3              1072 		 outi
   03DE FB                 1073 		 ei
   03DF ED A3              1074 		 outi
                           1075 	
                           1076 		
                           1077 ;	genLabel
                           1078 ;	genEndFunction
   03E1 DD E1              1079 	pop	ix
   03E3 C9                 1080 	ret
   03E4                    1081 _VPDCommand_end::
                           1082 ;carwar.c:851: void waitRetrace()
                           1083 ;	genLabel
                           1084 ;	genFunction
                           1085 ;	---------------------------------
                           1086 ; Function waitRetrace
                           1087 ; ---------------------------------
   03E4                    1088 _waitRetrace_start::
   03E4                    1089 _waitRetrace:
                           1090 ;carwar.c:863: _endasm;
                           1091 ;	genInline
                           1092 	
                           1093 	
   03E4 F3                 1094 		 di
   03E5                    1095 	 WAIT_RETRACE:
   03E5 DB 99              1096 		 in a,(0x99)
   03E7 E6 80              1097 		 and #0x80
   03E9 FE 00              1098 		 cp #0
   03EB 28 F8              1099 		 jr z, WAIT_RETRACE
   03ED FB                 1100 		 ei
                           1101 	
                           1102 		
                           1103 ;	genLabel
                           1104 ;	genEndFunction
   03EE C9                 1105 	ret
   03EF                    1106 _waitRetrace_end::
                           1107 ;carwar.c:869: void WaitForVDP()
                           1108 ;	genLabel
                           1109 ;	genFunction
                           1110 ;	---------------------------------
                           1111 ; Function WaitForVDP
                           1112 ; ---------------------------------
   03EF                    1113 _WaitForVDP_start::
   03EF                    1114 _WaitForVDP:
                           1115 ;carwar.c:890: _endasm;
                           1116 ;	genInline
                           1117 	
                           1118 	
                           1119 	
   03EF 3E 02              1120 		 ld a,#2
   03F1 F3                 1121 		 di
   03F2 D3 99              1122 		 out (#0x99),a
   03F4 3E 8F              1123 		 ld a,#(0x80+15)
   03F6 D3 99              1124 		 out (#0x99),a
   03F8                    1125 	 WAIT_VDP:
   03F8 00                 1126 		 nop
   03F9 DB 99              1127 		 in a,(#0x99)
   03FB 1F                 1128 		 rra
   03FC 38 FA              1129 		 jr c,WAIT_VDP
   03FE AF                 1130 		 xor a
   03FF D3 99              1131 		 out (#0x99),a
   0401 3E 8F              1132 		 ld a,#(0x80+15)
   0403 D3 99              1133 		 out (#0x99),a
   0405 FB                 1134 		 ei
                           1135 	
                           1136 		
                           1137 ;	genLabel
                           1138 ;	genEndFunction
   0406 C9                 1139 	ret
   0407                    1140 _WaitForVDP_end::
                           1141 ;carwar.c:894: char Joystick(char n)
                           1142 ;	genLabel
                           1143 ;	genFunction
                           1144 ;	---------------------------------
                           1145 ; Function Joystick
                           1146 ; ---------------------------------
   0407                    1147 _Joystick_start::
   0407                    1148 _Joystick:
   0407 DD E5              1149 	push	ix
   0409 DD 21 00 00        1150 	ld	ix,#0
   040D DD 39              1151 	add	ix,sp
                           1152 ;carwar.c:901: _endasm;
                           1153 ;	genInline
                           1154 	
   040F DD 7E 04           1155 		 ld a,4(ix)
   0412 CD D5 00           1156 		 call 0x00d5
   0415 6F                 1157 		 ld l,a
                           1158 		
                           1159 ;	genLabel
                           1160 ;	genEndFunction
   0416 DD E1              1161 	pop	ix
   0418 C9                 1162 	ret
   0419                    1163 _Joystick_end::
                           1164 ;carwar.c:905: char Joytrig(char n)
                           1165 ;	genLabel
                           1166 ;	genFunction
                           1167 ;	---------------------------------
                           1168 ; Function Joytrig
                           1169 ; ---------------------------------
   0419                    1170 _Joytrig_start::
   0419                    1171 _Joytrig:
   0419 DD E5              1172 	push	ix
   041B DD 21 00 00        1173 	ld	ix,#0
   041F DD 39              1174 	add	ix,sp
                           1175 ;carwar.c:913: _endasm;
                           1176 ;	genInline
                           1177 	
   0421 DD 7E 04           1178 		 ld a,4(ix)
   0424 CD D8 00           1179 		 call 0x00d8
   0427 26 00              1180 		 ld h,#0x00
   0429 6F                 1181 		 ld l,a
                           1182 		
                           1183 ;	genLabel
                           1184 ;	genEndFunction
   042A DD E1              1185 	pop	ix
   042C C9                 1186 	ret
   042D                    1187 _Joytrig_end::
                           1188 ;carwar.c:917: u8 GetKeyMatrixLine(u8 n)
                           1189 ;	genLabel
                           1190 ;	genFunction
                           1191 ;	---------------------------------
                           1192 ; Function GetKeyMatrixLine
                           1193 ; ---------------------------------
   042D                    1194 _GetKeyMatrixLine_start::
   042D                    1195 _GetKeyMatrixLine:
   042D DD E5              1196 	push	ix
   042F DD 21 00 00        1197 	ld	ix,#0
   0433 DD 39              1198 	add	ix,sp
                           1199 ;carwar.c:924: _endasm;
                           1200 ;	genInline
                           1201 	
   0435 DD 7E 04           1202 		 ld a,4(ix)
   0438 CD 41 01           1203 		 call 0x0141
   043B 6F                 1204 		 ld l,a
                           1205 		
                           1206 ;	genLabel
                           1207 ;	genEndFunction
   043C DD E1              1208 	pop	ix
   043E C9                 1209 	ret
   043F                    1210 _GetKeyMatrixLine_end::
                           1211 ;carwar.c:927: void SetTo50Hz()
                           1212 ;	genLabel
                           1213 ;	genFunction
                           1214 ;	---------------------------------
                           1215 ; Function SetTo50Hz
                           1216 ; ---------------------------------
   043F                    1217 _SetTo50Hz_start::
   043F                    1218 _SetTo50Hz:
                           1219 ;carwar.c:929: WaitForVDP();
                           1220 ;	genCall
                           1221 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   043F CDrEFs03           1222 	call	_WaitForVDP
                           1223 ;carwar.c:941: _endasm;
                           1224 ;	genInline
                           1225 	
                           1226 	
   0442 3E 02              1227 		 ld a,#2
   0444 F3                 1228 		 di
   0445 D3 99              1229 		 out (#0x99),a ;
                           1230 	
   0447 3E 89              1231 		 ld a,#(0x80+9)
   0449 D3 99              1232 		 out (#0x99),a ;
                           1233 	
   044B FB                 1234 		 ei
                           1235 		
                           1236 ;	genLabel
                           1237 ;	genEndFunction
   044C C9                 1238 	ret
   044D                    1239 _SetTo50Hz_end::
                           1240 ;carwar.c:944: void SetTo60Hz()
                           1241 ;	genLabel
                           1242 ;	genFunction
                           1243 ;	---------------------------------
                           1244 ; Function SetTo60Hz
                           1245 ; ---------------------------------
   044D                    1246 _SetTo60Hz_start::
   044D                    1247 _SetTo60Hz:
                           1248 ;carwar.c:946: WaitForVDP();
                           1249 ;	genCall
                           1250 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   044D CDrEFs03           1251 	call	_WaitForVDP
                           1252 ;carwar.c:958: _endasm;
                           1253 ;	genInline
                           1254 	
                           1255 	
   0450 3E 00              1256 		 ld a,#0
   0452 F3                 1257 		 di
   0453 D3 99              1258 		 out (#0x99),a ;
                           1259 	
   0455 3E 89              1260 		 ld a,#(0x80+9)
   0457 D3 99              1261 		 out (#0x99),a ;
                           1262 	
   0459 FB                 1263 		 ei
                           1264 		
                           1265 ;	genLabel
                           1266 ;	genEndFunction
   045A C9                 1267 	ret
   045B                    1268 _SetTo60Hz_end::
                           1269 ;carwar.c:964: void WriteToVRAM8(i16 addr, u8 value)
                           1270 ;	genLabel
                           1271 ;	genFunction
                           1272 ;	---------------------------------
                           1273 ; Function WriteToVRAM8
                           1274 ; ---------------------------------
   045B                    1275 _WriteToVRAM8_start::
   045B                    1276 _WriteToVRAM8:
   045B DD E5              1277 	push	ix
   045D DD 21 00 00        1278 	ld	ix,#0
   0461 DD 39              1279 	add	ix,sp
                           1280 ;carwar.c:968: WaitForVDP();
                           1281 ;	genCall
                           1282 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0463 CDrEFs03           1283 	call	_WaitForVDP
                           1284 ;carwar.c:995: _endasm;
                           1285 ;	genInline
                           1286 	
                           1287 		 ;
   0466 DD 7E 05           1288 		 ld a,5(ix) ;
   0469 E6 C0              1289 		 and #0xC0 ;
   046B 17                 1290 		       rla
   046C 17                 1291 		       rla
   046D F3                 1292 		 di
   046E D3 99              1293 		 out (#0x99),a
   0470 3E 8E              1294 		 ld a,#(0x80+14)
   0472 D3 99              1295 		 out (#0x99),a
                           1296 	
   0474 DD 7E 04           1297 		 ld a,4(ix) ;
   0477 D3 99              1298 		 out (#0x99),a
                           1299 	
   0479 DD 7E 05           1300 		 ld a,5(ix) ;
   047C E6 3F              1301 		 and #0x3F ;
   047E F6 40              1302 		 or #0x40 ;
   0480 D3 99              1303 		 out (#0x99),a
                           1304 	
                           1305 		 ;
   0482 DD 7E 06           1306 		 ld a,6(ix)
   0485 D3 98              1307 		 out (#0x98),a
                           1308 	
   0487 FB                 1309 		 ei
                           1310 		
                           1311 ;	genLabel
                           1312 ;	genEndFunction
   0488 DD E1              1313 	pop	ix
   048A C9                 1314 	ret
   048B                    1315 _WriteToVRAM8_end::
                           1316 ;carwar.c:1102: void HMMC(u8 page, u8 dx, u8 dy, u8 nx, u8 ny, u16 ram)
                           1317 ;	genLabel
                           1318 ;	genFunction
                           1319 ;	---------------------------------
                           1320 ; Function HMMC
                           1321 ; ---------------------------------
   048B                    1322 _HMMC_start::
   048B                    1323 _HMMC:
   048B DD E5              1324 	push	ix
   048D DD 21 00 00        1325 	ld	ix,#0
   0491 DD 39              1326 	add	ix,sp
   0493 21 ED FF           1327 	ld	hl,#-19
   0496 39                 1328 	add	hl,sp
   0497 F9                 1329 	ld	sp,hl
                           1330 ;carwar.c:1108: buffer.DX = dx;
                           1331 ;	genAddrOf
   0498 21 04 00           1332 	ld	hl,#0x0004
   049B 39                 1333 	add	hl,sp
   049C 4D                 1334 	ld	c,l
   049D 44                 1335 	ld	b,h
                           1336 ;	genPlus
                           1337 ;	AOP_STK for _HMMC_sloc0_1_0
                           1338 ;	genPlusIncr
   049E 79                 1339 	ld	a,c
   049F C6 04              1340 	add	a,#0x04
   04A1 DD 77 EF           1341 	ld	-17(ix),a
   04A4 78                 1342 	ld	a,b
   04A5 CE 00              1343 	adc	a,#0x00
   04A7 DD 77 F0           1344 	ld	-16(ix),a
                           1345 ;	genCast
                           1346 ;	AOP_STK for 
   04AA DD 5E 05           1347 	ld	e,5(ix)
   04AD 16 00              1348 	ld	d,#0x00
                           1349 ;	genAssign (pointer)
                           1350 ;	AOP_STK for _HMMC_sloc0_1_0
                           1351 ;	isBitvar = 0
   04AF DD 6E EF           1352 	ld	l,-17(ix)
   04B2 DD 66 F0           1353 	ld	h,-16(ix)
   04B5 73                 1354 	ld	(hl),e
   04B6 23                 1355 	inc	hl
   04B7 72                 1356 	ld	(hl),d
                           1357 ;carwar.c:1109: buffer.DY = dy /*+ (page * 512)*/;
                           1358 ;	genPlus
                           1359 ;	AOP_STK for _HMMC_sloc1_1_0
                           1360 ;	genPlusIncr
   04B8 79                 1361 	ld	a,c
   04B9 C6 06              1362 	add	a,#0x06
   04BB DD 77 ED           1363 	ld	-19(ix),a
   04BE 78                 1364 	ld	a,b
   04BF CE 00              1365 	adc	a,#0x00
   04C1 DD 77 EE           1366 	ld	-18(ix),a
                           1367 ;	genCast
                           1368 ;	AOP_STK for 
   04C4 DD 5E 06           1369 	ld	e,6(ix)
   04C7 16 00              1370 	ld	d,#0x00
                           1371 ;	genAssign (pointer)
                           1372 ;	AOP_STK for _HMMC_sloc1_1_0
                           1373 ;	isBitvar = 0
   04C9 DD 6E ED           1374 	ld	l,-19(ix)
   04CC DD 66 EE           1375 	ld	h,-18(ix)
   04CF 73                 1376 	ld	(hl),e
   04D0 23                 1377 	inc	hl
   04D1 72                 1378 	ld	(hl),d
                           1379 ;carwar.c:1110: buffer.NX = nx;
                           1380 ;	genPlus
                           1381 ;	AOP_STK for _HMMC_sloc1_1_0
                           1382 ;	genPlusIncr
   04D2 79                 1383 	ld	a,c
   04D3 C6 08              1384 	add	a,#0x08
   04D5 DD 77 ED           1385 	ld	-19(ix),a
   04D8 78                 1386 	ld	a,b
   04D9 CE 00              1387 	adc	a,#0x00
   04DB DD 77 EE           1388 	ld	-18(ix),a
                           1389 ;	genCast
                           1390 ;	AOP_STK for 
   04DE DD 5E 07           1391 	ld	e,7(ix)
   04E1 16 00              1392 	ld	d,#0x00
                           1393 ;	genAssign (pointer)
                           1394 ;	AOP_STK for _HMMC_sloc1_1_0
                           1395 ;	isBitvar = 0
   04E3 DD 6E ED           1396 	ld	l,-19(ix)
   04E6 DD 66 EE           1397 	ld	h,-18(ix)
   04E9 73                 1398 	ld	(hl),e
   04EA 23                 1399 	inc	hl
   04EB 72                 1400 	ld	(hl),d
                           1401 ;carwar.c:1111: buffer.NY = ny;
                           1402 ;	genPlus
                           1403 ;	AOP_STK for _HMMC_sloc1_1_0
                           1404 ;	genPlusIncr
   04EC 79                 1405 	ld	a,c
   04ED C6 0A              1406 	add	a,#0x0A
   04EF DD 77 ED           1407 	ld	-19(ix),a
   04F2 78                 1408 	ld	a,b
   04F3 CE 00              1409 	adc	a,#0x00
   04F5 DD 77 EE           1410 	ld	-18(ix),a
                           1411 ;	genCast
                           1412 ;	AOP_STK for 
   04F8 DD 5E 08           1413 	ld	e,8(ix)
   04FB 16 00              1414 	ld	d,#0x00
                           1415 ;	genAssign (pointer)
                           1416 ;	AOP_STK for _HMMC_sloc1_1_0
                           1417 ;	isBitvar = 0
   04FD DD 6E ED           1418 	ld	l,-19(ix)
   0500 DD 66 EE           1419 	ld	h,-18(ix)
   0503 73                 1420 	ld	(hl),e
   0504 23                 1421 	inc	hl
   0505 72                 1422 	ld	(hl),d
                           1423 ;carwar.c:1112: buffer.CLR = ((u8*)ram)[0];
                           1424 ;	genPlus
                           1425 ;	AOP_STK for _HMMC_sloc1_1_0
                           1426 ;	genPlusIncr
   0506 79                 1427 	ld	a,c
   0507 C6 0C              1428 	add	a,#0x0C
   0509 DD 77 ED           1429 	ld	-19(ix),a
   050C 78                 1430 	ld	a,b
   050D CE 00              1431 	adc	a,#0x00
   050F DD 77 EE           1432 	ld	-18(ix),a
                           1433 ;	genCast
                           1434 ;	AOP_STK for 
   0512 DD 5E 09           1435 	ld	e,9(ix)
   0515 DD 56 0A           1436 	ld	d,10(ix)
                           1437 ;	genPointerGet
   0518 1A                 1438 	ld	a,(de)
                           1439 ;	genAssign (pointer)
                           1440 ;	AOP_STK for _HMMC_sloc1_1_0
                           1441 ;	isBitvar = 0
   0519 DD 6E ED           1442 	ld	l,-19(ix)
   051C DD 66 EE           1443 	ld	h,-18(ix)
   051F 77                 1444 	ld	(hl),a
                           1445 ;carwar.c:1113: buffer.ARG = 0;
                           1446 ;	genPlus
                           1447 ;	genPlusIncr
   0520 79                 1448 	ld	a,c
   0521 C6 0D              1449 	add	a,#0x0D
   0523 5F                 1450 	ld	e,a
   0524 78                 1451 	ld	a,b
   0525 CE 00              1452 	adc	a,#0x00
   0527 57                 1453 	ld	d,a
                           1454 ;	genAssign (pointer)
                           1455 ;	isBitvar = 0
   0528 3E 00              1456 	ld	a,#0x00
   052A 12                 1457 	ld	(de),a
                           1458 ;carwar.c:1114: buffer.CMD = 0xF0;
                           1459 ;	genPlus
                           1460 ;	genPlusIncr
   052B 79                 1461 	ld	a,c
   052C C6 0E              1462 	add	a,#0x0E
   052E 4F                 1463 	ld	c,a
   052F 78                 1464 	ld	a,b
   0530 CE 00              1465 	adc	a,#0x00
   0532 47                 1466 	ld	b,a
                           1467 ;	genAssign (pointer)
                           1468 ;	isBitvar = 0
   0533 3E F0              1469 	ld	a,#0xF0
   0535 02                 1470 	ld	(bc),a
                           1471 ;carwar.c:1115: SetupHMMC((u16)&buffer.DX);
                           1472 ;	genAssign
                           1473 ;	AOP_STK for _HMMC_sloc0_1_0
   0536 DD 4E EF           1474 	ld	c,-17(ix)
   0539 DD 46 F0           1475 	ld	b,-16(ix)
                           1476 ;	genCast
                           1477 ;	genIpush
                           1478 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   053C C5                 1479 	push	bc
                           1480 ;	genCall
   053D CDr73s05           1481 	call	_SetupHMMC
   0540 F1                 1482 	pop	af
                           1483 ;carwar.c:1167: _endasm;
                           1484 ;	genInline
                           1485 	
                           1486 	
   0541 DD 6E 09           1487 		 ld l,9(ix)
   0544 DD 66 0A           1488 		 ld h,10(ix)
                           1489 	
   0547 F3                 1490 		 di
                           1491 	
   0548                    1492 	 SEND_NEXT_COLOR:
                           1493 	
   0548 23                 1494 		 inc hl
                           1495 	
                           1496 		 ;
                           1497 		 ;
   0549 7E                 1498 		 ld a,(hl)
   054A D3 99              1499 		 out (#0x99),a
   054C 3E AC              1500 		 ld a,#(0x80+44)
   054E D3 99              1501 		 out (#0x99),a
                           1502 	
   0550                    1503 	 WAIT_REG2:
                           1504 	
                           1505 		 ;
                           1506 		 ;
   0550 3E 02              1507 		 ld a,#2
   0552 D3 99              1508 		 out (#0x99),a
   0554 3E 8F              1509 		 ld a,#(0x80+15)
   0556 D3 99              1510 		 out (#0x99),a
                           1511 	
                           1512 		 ;
   0558 00                 1513 		 nop
   0559 DB 99              1514 		 in a,(#0x99)
   055B 47                 1515 		 ld b,a ;
   055C 1F                 1516 		 rra ;
   055D 30 07              1517 		 jr nc,COLOR_COPY_END
                           1518 	
                           1519 		 ;
                           1520 		 ;
   055F 78                 1521 		 ld a,b ;
   0560 17                 1522 		 rla ;
   0561 30 ED              1523 		 jr nc,WAIT_REG2
   0563 C3r48s05           1524 		 jp SEND_NEXT_COLOR
                           1525 	
   0566                    1526 	 COLOR_COPY_END:
                           1527 	
                           1528 		 ;
   0566 AF                 1529 		 xor a
   0567 D3 99              1530 		 out (#0x99),a
   0569 3E 8F              1531 		 ld a,#(0x80+15)
   056B D3 99              1532 		 out (#0x99),a
                           1533 	
   056D FB                 1534 		 ei
                           1535 	
                           1536 		
                           1537 ;	genLabel
                           1538 ;	genEndFunction
   056E DD F9              1539 	ld	sp,ix
   0570 DD E1              1540 	pop	ix
   0572 C9                 1541 	ret
   0573                    1542 _HMMC_end::
                           1543 ;carwar.c:1190: void SetupHMMC(u16 address)
                           1544 ;	genLabel
                           1545 ;	genFunction
                           1546 ;	---------------------------------
                           1547 ; Function SetupHMMC
                           1548 ; ---------------------------------
   0573                    1549 _SetupHMMC_start::
   0573                    1550 _SetupHMMC:
   0573 DD E5              1551 	push	ix
   0575 DD 21 00 00        1552 	ld	ix,#0
   0579 DD 39              1553 	add	ix,sp
                           1554 ;carwar.c:1194: WaitForVDP();
                           1555 ;	genCall
                           1556 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   057B CDrEFs03           1557 	call	_WaitForVDP
                           1558 ;carwar.c:1220: _endasm;
                           1559 ;	genInline
                           1560 	
                           1561 	
   057E DD 6E 04           1562 		 ld l,4(ix)
   0581 DD 66 05           1563 		 ld h,5(ix)
                           1564 		 ;
   0584 3E 24              1565 		 ld a,#36 ;
   0586 F3                 1566 		 di
   0587 D3 99              1567 		 out (#0x99),a
   0589 3E 91              1568 		 ld a,#(0x80+17)
   058B D3 99              1569 		 out (#0x99),a ;
   058D 0E 9B              1570 		 ld c,#0x99 +#2 ;
   058F ED A3              1571 		 outi
   0591 ED A3              1572 		 outi
   0593 ED A3              1573 		 outi
   0595 ED A3              1574 		 outi
   0597 ED A3              1575 		 outi
   0599 ED A3              1576 		 outi
   059B ED A3              1577 		 outi
   059D ED A3              1578 		 outi
   059F ED A3              1579 		 outi
   05A1 ED A3              1580 		 outi
   05A3 FB                 1581 		 ei ;
   05A4 ED A3              1582 		 outi
                           1583 	
                           1584 		
                           1585 ;	genLabel
                           1586 ;	genEndFunction
   05A6 DD E1              1587 	pop	ix
   05A8 C9                 1588 	ret
   05A9                    1589 _SetupHMMC_end::
                           1590 	.area _CODE
                           1591 	.area _CABS
