                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.8.0 #5117 (Mar 23 2008) (MINGW32)
                              4 ; This file was generated Fri Jan 21 00:43:56 2011
                              5 ;--------------------------------------------------------
                              6 	.module carwar
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _main
                             13 	.globl _g_Sprite
                             14 	.globl _CMD
                             15 	.globl _ARG
                             16 	.globl _CLR
                             17 	.globl _NY
                             18 	.globl _NX
                             19 	.globl _DY
                             20 	.globl _DX
                             21 	.globl _SY
                             22 	.globl _SX
                             23 	.globl _MainLoop
                             24 	.globl _SetScreen8
                             25 	.globl _SetPage8
                             26 	.globl _DrawPoint8
                             27 	.globl _DrawLine
                             28 	.globl _DrawLineSimple
                             29 	.globl _DrawLine8
                             30 	.globl _VPDCommand
                             31 	.globl _waitRetrace
                             32 	.globl _WaitForVDP
                             33 	.globl _Joystick
                             34 	.globl _Joytrig
                             35 	.globl _GetKeyMatrixLine
                             36 	.globl _SetTo50Hz
                             37 	.globl _SetTo60Hz
                             38 	.globl _WriteToVRAM8
                             39 	.globl _HMMC
                             40 	.globl _SetupHMMC
                             41 ;--------------------------------------------------------
                             42 ; special function registers
                             43 ;--------------------------------------------------------
                    00A8     44 _g_slotPort	=	0x00a8
                             45 ;--------------------------------------------------------
                             46 ;  ram data
                             47 ;--------------------------------------------------------
                             48 	.area _DATA
   0000                      49 _SX::
   0000                      50 	.ds 2
   0002                      51 _SY::
   0002                      52 	.ds 2
   0004                      53 _DX::
   0004                      54 	.ds 2
   0006                      55 _DY::
   0006                      56 	.ds 2
   0008                      57 _NX::
   0008                      58 	.ds 2
   000A                      59 _NY::
   000A                      60 	.ds 2
   000C                      61 _CLR::
   000C                      62 	.ds 1
   000D                      63 _ARG::
   000D                      64 	.ds 1
   000E                      65 _CMD::
   000E                      66 	.ds 1
   000F                      67 _g_Sprite::
   000F                      68 	.ds 64
                             69 ;--------------------------------------------------------
                             70 ; overlayable items in  ram 
                             71 ;--------------------------------------------------------
                             72 	.area _OVERLAY
                             73 ;--------------------------------------------------------
                             74 ; external initialized ram data
                             75 ;--------------------------------------------------------
                             76 ;--------------------------------------------------------
                             77 ; global & static initialisations
                             78 ;--------------------------------------------------------
                             79 	.area _HOME
                             80 	.area _GSINIT
                             81 	.area _GSFINAL
                             82 	.area _GSINIT
                             83 ;carwar.c:175: u8 g_Sprite[8*8] =
                             84 ;	genArrayInit
                             85 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0000 21r0Fs00             86 	ld	hl,#_g_Sprite
   0003 CDr00s00             87 	call	__initrleblock
   0006 F7 FE                88 	.db	#-9,#0xFE
   0008 2E                   89 	.db	46
   0009 64 00 00 00 00 C8    90 	.db	0x64, 0x00, 0x00, 0x00, 0x00, 0xC8, 0xFE, 0xFE
        FE FE
   0011 00 64 00 00 C8 00    91 	.db	0x00, 0x64, 0x00, 0x00, 0xC8, 0x00, 0xFE, 0xFE
        FE FE
   0019 00 00 64 C8 00 00    92 	.db	0x00, 0x00, 0x64, 0xC8, 0x00, 0x00, 0xFE, 0xFE
        FE FE
   0021 00 00 C8 64 00 00    93 	.db	0x00, 0x00, 0xC8, 0x64, 0x00, 0x00, 0xFE, 0xFE
        FE FE
   0029 00 C8 00 00 64 00    94 	.db	0x00, 0xC8, 0x00, 0x00, 0x64, 0x00, 0xFE, 0xFE
        FE FE
   0031 C8 00 00 00 00 64    95 	.db	0xC8, 0x00, 0x00, 0x00, 0x00, 0x64
   0037 F7 FE                96 	.db	#-9,#0xFE
   0039 00                   97 	.db	0
                             98 ;--------------------------------------------------------
                             99 ; Home
                            100 ;--------------------------------------------------------
                            101 	.area _HOME
                            102 	.area _HOME
                            103 ;--------------------------------------------------------
                            104 ; code
                            105 ;--------------------------------------------------------
                            106 	.area _CODE
                            107 ;carwar.c:154: void main(void)
                            108 ;	genLabel
                            109 ;	genFunction
                            110 ;	---------------------------------
                            111 ; Function main
                            112 ; ---------------------------------
   0000                     113 _main_start::
   0000                     114 _main:
                            115 ;carwar.c:160: _endasm;
                            116 ;	genInline
                            117 	
   0000 F3                  118 		 di
   0001 ED 7B 4A FC         119 		 ld sp, (#0xFC4A)
   0005 FB                  120 		 ei
                            121 		
                            122 ;carwar.c:162: g_slotPort = (g_slotPort & 0xCF) | ((g_slotPort & 0x0C) << 2);
                            123 ;	genAnd
                            124 ;Z80 AOP_SFR for _g_slotPort banked:0 bc:1 de:0
   0006 DB A8               125 	in	a,(_g_slotPort)
   0008 E6 CF               126 	and	a,#0xCF
   000A 4F                  127 	ld	c,a
                            128 ;	genAnd
                            129 ;Z80 AOP_SFR for _g_slotPort banked:0 bc:1 de:0
   000B DB A8               130 	in	a,(_g_slotPort)
   000D E6 0C               131 	and	a,#0x0C
   000F 47                  132 	ld	b,a
                            133 ;	genLeftShift
   0010 CB 20               134 	sla	b
   0012 CB 20               135 	sla	b
                            136 ;	genOr
                            137 ;Z80 AOP_SFR for _g_slotPort banked:0 bc:1 de:0
   0014 79                  138 	ld	a,c
   0015 B0                  139 	or	a,b
   0016 D3 A8               140 	out	(_g_slotPort),a
                            141 ;carwar.c:164: MainLoop();
                            142 ;	genCall
                            143 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
                            144 ;	genLabel
                            145 ;	genEndFunction
   0018 C3r1Bs00            146 	jp	_MainLoop
   001B                     147 _main_end::
                            148 ;carwar.c:190: void MainLoop()
                            149 ;	genLabel
                            150 ;	genFunction
                            151 ;	---------------------------------
                            152 ; Function MainLoop
                            153 ; ---------------------------------
   001B                     154 _MainLoop_start::
   001B                     155 _MainLoop:
   001B DD E5               156 	push	ix
   001D DD 21 00 00         157 	ld	ix,#0
   0021 DD 39               158 	add	ix,sp
   0023 21 E9 FF            159 	ld	hl,#-23
   0026 39                  160 	add	hl,sp
   0027 F9                  161 	ld	sp,hl
                            162 ;carwar.c:192: u8 clsScreen8[15] = 
                            163 ;	genAddrOf
   0028 21 08 00            164 	ld	hl,#0x0008
   002B 39                  165 	add	hl,sp
   002C 4D                  166 	ld	c,l
   002D 44                  167 	ld	b,h
                            168 ;	genArrayInit
                            169 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 1 deSending: 0
   002E C5                  170 	push	bc
   002F 69                  171 	ld	l,c
   0030 60                  172 	ld	h,b
   0031 CDr00s00            173 	call	__initrleblock
   0034 F7 00               174 	.db	#-9,#0x00
   0036 06                  175 	.db	6
   0037 01 D4 00 00 00 C0   176 	.db	0x01, 0xD4, 0x00, 0x00, 0x00, 0xC0
   003D 00                  177 	.db	0
   003E C1                  178 	pop	bc
                            179 ;carwar.c:197: u8 x = 128, y = 128;
                            180 ;	genAssign
                            181 ;	AOP_STK for _MainLoop_x_1_1
   003F DD 36 F0 80         182 	ld	-16(ix),#0x80
                            183 ;	genAssign
                            184 ;	AOP_STK for _MainLoop_y_1_1
   0043 DD 36 EF 80         185 	ld	-17(ix),#0x80
                            186 ;carwar.c:219: SetTo60Hz();
                            187 ;	genCall
                            188 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0047 CDr2Bs04            189 	call	_SetTo60Hz
                            190 ;carwar.c:220: SetScreen8();
                            191 ;	genCall
                            192 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   004A CDr25s02            193 	call	_SetScreen8
                            194 ;carwar.c:224: VPDCommand((int)&clsScreen8);
                            195 ;	genAddrOf
   004D 21 08 00            196 	ld	hl,#0x0008
   0050 39                  197 	add	hl,sp
   0051 5D                  198 	ld	e,l
   0052 54                  199 	ld	d,h
                            200 ;	genCast
                            201 ;	genIpush
                            202 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0053 D5                  203 	push	de
                            204 ;	genCall
   0054 CDr84s03            205 	call	_VPDCommand
   0057 F1                  206 	pop	af
                            207 ;carwar.c:226: while(bEnd == 0)
                            208 ;	genLabel
   0058                     209 00115$:
                            210 ;carwar.c:236: addr = x + (y << 8);
                            211 ;	genCast
                            212 ;	AOP_STK for _MainLoop_x_1_1
   0058 DD 5E F0            213 	ld	e,-16(ix)
   005B 16 00               214 	ld	d,#0x00
                            215 ;	genCast
                            216 ;	AOP_STK for _MainLoop_y_1_1
   005D DD 46 EF            217 	ld	b,-17(ix)
                            218 ;	genLeftShift
   0060 48                  219 	ld	c,b
   0061 06 00               220 	ld	b,#0x00
                            221 ;	genPlus
   0063 7B                  222 	ld	a,e
   0064 80                  223 	add	a,b
   0065 47                  224 	ld	b,a
   0066 7A                  225 	ld	a,d
   0067 89                  226 	adc	a,c
   0068 4F                  227 	ld	c,a
                            228 ;	genAssign
                            229 ;	(registers are the same)
                            230 ;carwar.c:237: WriteToVRAM8(addr, 0x0F);
                            231 ;	genIpush
                            232 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0069 3E 0F               233 	ld	a,#0x0F
   006B F5                  234 	push	af
   006C 33                  235 	inc	sp
                            236 ;	genIpush
   006D 68                  237 	ld	l,b
   006E 61                  238 	ld	h,c
   006F E5                  239 	push	hl
                            240 ;	genCall
   0070 CDr39s04            241 	call	_WriteToVRAM8
   0073 F1                  242 	pop	af
   0074 33                  243 	inc	sp
                            244 ;carwar.c:238: HMMC(0, 100, 100, 8, 8, (u16)&g_Sprite);
                            245 ;	genCast
   0075 0Er0F               246 	ld	c,#<_g_Sprite
   0077 06s00               247 	ld	b,#>_g_Sprite
                            248 ;	genIpush
                            249 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0079 C5                  250 	push	bc
                            251 ;	genIpush
   007A 21 08 08            252 	ld	hl,#0x0808
   007D E5                  253 	push	hl
                            254 ;	genIpush
   007E 21 64 64            255 	ld	hl,#0x6464
   0081 E5                  256 	push	hl
                            257 ;	genIpush
   0082 3E 00               258 	ld	a,#0x00
   0084 F5                  259 	push	af
   0085 33                  260 	inc	sp
                            261 ;	genCall
   0086 CDr69s04            262 	call	_HMMC
   0089 F1                  263 	pop	af
   008A F1                  264 	pop	af
   008B F1                  265 	pop	af
   008C 33                  266 	inc	sp
                            267 ;carwar.c:241: if((i = Joystick(0) | Joystick(1) | Joystick(2)) != 0)
                            268 ;	genIpush
                            269 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   008D 3E 00               270 	ld	a,#0x00
   008F F5                  271 	push	af
   0090 33                  272 	inc	sp
                            273 ;	genCall
   0091 CDrE5s03            274 	call	_Joystick
   0094 4D                  275 	ld	c,l
   0095 33                  276 	inc	sp
                            277 ;	genIpush
                            278 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 1 deSending: 0
   0096 C5                  279 	push	bc
   0097 3E 01               280 	ld	a,#0x01
   0099 F5                  281 	push	af
   009A 33                  282 	inc	sp
                            283 ;	genCall
   009B CDrE5s03            284 	call	_Joystick
   009E 45                  285 	ld	b,l
   009F 33                  286 	inc	sp
   00A0 78                  287 	ld	a,b
   00A1 C1                  288 	pop	bc
                            289 ;	genOr
   00A2 47                  290 	ld	b,a
   00A3 B1                  291 	or	a,c
   00A4 4F                  292 	ld	c,a
                            293 ;	genIpush
                            294 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 1 deSending: 0
   00A5 C5                  295 	push	bc
   00A6 3E 02               296 	ld	a,#0x02
   00A8 F5                  297 	push	af
   00A9 33                  298 	inc	sp
                            299 ;	genCall
   00AA CDrE5s03            300 	call	_Joystick
   00AD 45                  301 	ld	b,l
   00AE 33                  302 	inc	sp
   00AF 78                  303 	ld	a,b
   00B0 C1                  304 	pop	bc
                            305 ;	genOr
   00B1 47                  306 	ld	b,a
   00B2 B1                  307 	or	a,c
                            308 ;	genCast
   00B3 4F                  309 	ld	c,a
   00B4 17                  310 	rla	
   00B5 9F                  311 	sbc	a,a
   00B6 47                  312 	ld	b,a
                            313 ;	genAssign
   00B7 59                  314 	ld	e,c
   00B8 50                  315 	ld	d,b
                            316 ;	genIfx
   00B9 79                  317 	ld	a,c
   00BA B0                  318 	or	a,b
   00BB CAr2As01            319 	jp	Z,00111$
                            320 ;carwar.c:243: switch (i)
                            321 ;	genCmpLt
   00BE 7B                  322 	ld	a,e
   00BF D6 01               323 	sub	a,#0x01
   00C1 7A                  324 	ld	a,d
   00C2 DE 00               325 	sbc	a,#0x00
   00C4 FAr2As01            326 	jp	M,00111$
                            327 ;	genCmpGt
   00C7 3E 08               328 	ld	a,#0x08
   00C9 93                  329 	sub	a,e
   00CA 3E 00               330 	ld	a,#0x00
   00CC 9A                  331 	sbc	a,d
   00CD FAr2As01            332 	jp	M,00111$
                            333 ;	genMinus
   00D0 7B                  334 	ld	a,e
   00D1 C6 FF               335 	add	a,#0xFF
   00D3 4F                  336 	ld	c,a
                            337 ;	genJumpTab
   00D4 D5                  338 	push	de
   00D5 59                  339 	ld	e,c
   00D6 16 00               340 	ld	d,#0x00
   00D8 21rE0s00            341 	ld	hl,#00146$
   00DB 19                  342 	add	hl,de
   00DC 19                  343 	add	hl,de
   00DD 19                  344 	add	hl,de
   00DE D1                  345 	pop	de
   00DF E9                  346 	jp	(hl)
   00E0                     347 00146$:
   00E0 C3rF8s00            348 	jp	00101$
   00E3 C3rFDs00            349 	jp	00102$
   00E6 C3r05s01            350 	jp	00103$
   00E9 C3r0As01            351 	jp	00104$
   00EC C3r12s01            352 	jp	00105$
   00EF C3r17s01            353 	jp	00106$
   00F2 C3r1Fs01            354 	jp	00107$
   00F5 C3r24s01            355 	jp	00108$
                            356 ;carwar.c:245: case 1: y--; break;
                            357 ;	genLabel
   00F8                     358 00101$:
                            359 ;	genMinus
                            360 ;	AOP_STK for _MainLoop_y_1_1
   00F8 DD 35 EF            361 	dec	-17(ix)
                            362 ;	genGoto
   00FB 18 2D               363 	jr	00111$
                            364 ;carwar.c:246: case 2: y--; x++; break;
                            365 ;	genLabel
   00FD                     366 00102$:
                            367 ;	genMinus
                            368 ;	AOP_STK for _MainLoop_y_1_1
   00FD DD 35 EF            369 	dec	-17(ix)
                            370 ;	genPlus
                            371 ;	AOP_STK for _MainLoop_x_1_1
                            372 ;	genPlusIncr
   0100 DD 34 F0            373 	inc	-16(ix)
                            374 ;	genGoto
   0103 18 25               375 	jr	00111$
                            376 ;carwar.c:247: case 3: x++; break;
                            377 ;	genLabel
   0105                     378 00103$:
                            379 ;	genPlus
                            380 ;	AOP_STK for _MainLoop_x_1_1
                            381 ;	genPlusIncr
   0105 DD 34 F0            382 	inc	-16(ix)
                            383 ;	genGoto
   0108 18 20               384 	jr	00111$
                            385 ;carwar.c:248: case 4: y++; x++; break;
                            386 ;	genLabel
   010A                     387 00104$:
                            388 ;	genPlus
                            389 ;	AOP_STK for _MainLoop_y_1_1
                            390 ;	genPlusIncr
   010A DD 34 EF            391 	inc	-17(ix)
                            392 ;	genPlus
                            393 ;	AOP_STK for _MainLoop_x_1_1
                            394 ;	genPlusIncr
   010D DD 34 F0            395 	inc	-16(ix)
                            396 ;	genGoto
   0110 18 18               397 	jr	00111$
                            398 ;carwar.c:249: case 5: y++; break;
                            399 ;	genLabel
   0112                     400 00105$:
                            401 ;	genPlus
                            402 ;	AOP_STK for _MainLoop_y_1_1
                            403 ;	genPlusIncr
   0112 DD 34 EF            404 	inc	-17(ix)
                            405 ;	genGoto
   0115 18 13               406 	jr	00111$
                            407 ;carwar.c:250: case 6: y++; x--; break;
                            408 ;	genLabel
   0117                     409 00106$:
                            410 ;	genPlus
                            411 ;	AOP_STK for _MainLoop_y_1_1
                            412 ;	genPlusIncr
   0117 DD 34 EF            413 	inc	-17(ix)
                            414 ;	genMinus
                            415 ;	AOP_STK for _MainLoop_x_1_1
   011A DD 35 F0            416 	dec	-16(ix)
                            417 ;	genGoto
   011D 18 0B               418 	jr	00111$
                            419 ;carwar.c:251: case 7: x--; break;
                            420 ;	genLabel
   011F                     421 00107$:
                            422 ;	genMinus
                            423 ;	AOP_STK for _MainLoop_x_1_1
   011F DD 35 F0            424 	dec	-16(ix)
                            425 ;	genGoto
   0122 18 06               426 	jr	00111$
                            427 ;carwar.c:252: case 8: y--; x--; break;
                            428 ;	genLabel
   0124                     429 00108$:
                            430 ;	genMinus
                            431 ;	AOP_STK for _MainLoop_y_1_1
   0124 DD 35 EF            432 	dec	-17(ix)
                            433 ;	genMinus
                            434 ;	AOP_STK for _MainLoop_x_1_1
   0127 DD 35 F0            435 	dec	-16(ix)
                            436 ;carwar.c:253: }
                            437 ;	genLabel
   012A                     438 00111$:
                            439 ;carwar.c:281: for(i=0; i<10; i++) // rows
                            440 ;	genAssign
   012A 11 00 00            441 	ld	de,#0x0000
                            442 ;	genAssign
                            443 ;	AOP_STK for _MainLoop_i_1_1
   012D DD 36 ED 00         444 	ld	-19(ix),#0x00
   0131 DD 36 EE 00         445 	ld	-18(ix),#0x00
                            446 ;	genLabel
   0135                     447 00122$:
                            448 ;	genCmpLt
                            449 ;	AOP_STK for _MainLoop_i_1_1
   0135 DD 7E ED            450 	ld	a,-19(ix)
   0138 D6 0A               451 	sub	a,#0x0A
   013A DD 7E EE            452 	ld	a,-18(ix)
   013D DE 00               453 	sbc	a,#0x00
   013F F2rE8s01            454 	jp	P,00145$
                            455 ;carwar.c:283: keyLine = GetKeyMatrixLine(i);
                            456 ;	genCast
                            457 ;	AOP_STK for _MainLoop_i_1_1
   0142 DD 4E ED            458 	ld	c,-19(ix)
                            459 ;	genIpush
                            460 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0145 79                  461 	ld	a,c
   0146 F5                  462 	push	af
   0147 33                  463 	inc	sp
                            464 ;	genCall
   0148 CDr0Bs04            465 	call	_GetKeyMatrixLine
   014B 4D                  466 	ld	c,l
   014C 33                  467 	inc	sp
                            468 ;	genAssign
   014D 59                  469 	ld	e,c
                            470 ;carwar.c:284: for(j=0; j<8; j++) // characters
                            471 ;	genAssign
                            472 ;	AOP_STK for _MainLoop_j_1_1
   014E DD 36 EB 00         473 	ld	-21(ix),#0x00
   0152 DD 36 EC 00         474 	ld	-20(ix),#0x00
                            475 ;	genLabel
   0156                     476 00118$:
                            477 ;	genCmpLt
                            478 ;	AOP_STK for _MainLoop_j_1_1
   0156 DD 7E EB            479 	ld	a,-21(ix)
   0159 D6 08               480 	sub	a,#0x08
   015B DD 7E EC            481 	ld	a,-20(ix)
   015E DE 00               482 	sbc	a,#0x00
   0160 F2rD7s01            483 	jp	P,00124$
                            484 ;carwar.c:286: if(keyLine & 1 << j)
                            485 ;	genLeftShift
                            486 ;	AOP_STK for _MainLoop_j_1_1
   0163 DD 7E EB            487 	ld	a,-21(ix)
   0166 3C                  488 	inc	a
                            489 ;	AOP_STK for _MainLoop_sloc0_1_0
   0167 F5                  490 	push	af
   0168 DD 36 E9 01         491 	ld	-23(ix),#0x01
   016C DD 36 EA 00         492 	ld	-22(ix),#0x00
   0170 F1                  493 	pop	af
   0171 18 08               494 	jr	00148$
   0173                     495 00147$:
   0173 DD CB E9 26         496 	sla	-23(ix)
   0177 DD CB EA 16         497 	rl	-22(ix)
   017B                     498 00148$:
   017B 3D                  499 	dec	a
   017C 20 F5               500 	jr	NZ,00147$
                            501 ;	genCast
   017E 4B                  502 	ld	c,e
   017F 06 00               503 	ld	b,#0x00
                            504 ;	genAnd
                            505 ;	AOP_STK for _MainLoop_sloc0_1_0
   0181 79                  506 	ld	a,c
   0182 DD A6 E9            507 	and	a,-23(ix)
   0185 4F                  508 	ld	c,a
   0186 78                  509 	ld	a,b
   0187 DD A6 EA            510 	and	a,-22(ix)
                            511 ;	genIfx
   018A 47                  512 	ld	b,a
   018B B1                  513 	or	a,c
   018C 28 20               514 	jr	Z,00113$
                            515 ;carwar.c:287: DrawPoint8(10 + j, 10 + i, 0);
                            516 ;	genCast
                            517 ;	AOP_STK for _MainLoop_i_1_1
   018E DD 4E ED            518 	ld	c,-19(ix)
                            519 ;	genPlus
                            520 ;	genPlusIncr
   0191 79                  521 	ld	a,c
   0192 C6 0A               522 	add	a,#0x0A
   0194 4F                  523 	ld	c,a
                            524 ;	genCast
                            525 ;	AOP_STK for _MainLoop_j_1_1
   0195 DD 46 EB            526 	ld	b,-21(ix)
                            527 ;	genPlus
                            528 ;	genPlusIncr
   0198 78                  529 	ld	a,b
   0199 C6 0A               530 	add	a,#0x0A
   019B 47                  531 	ld	b,a
                            532 ;	genIpush
                            533 ; _saveRegsForCall: sendSetSize: 0 deInUse: 1 bcInUse: 0 deSending: 0
   019C D5                  534 	push	de
   019D 3E 00               535 	ld	a,#0x00
   019F F5                  536 	push	af
   01A0 33                  537 	inc	sp
                            538 ;	genIpush
   01A1 79                  539 	ld	a,c
   01A2 F5                  540 	push	af
   01A3 33                  541 	inc	sp
                            542 ;	genIpush
   01A4 C5                  543 	push	bc
   01A5 33                  544 	inc	sp
                            545 ;	genCall
   01A6 CDr6As02            546 	call	_DrawPoint8
   01A9 F1                  547 	pop	af
   01AA 33                  548 	inc	sp
   01AB D1                  549 	pop	de
                            550 ;	genGoto
   01AC 18 1E               551 	jr	00120$
                            552 ;	genLabel
   01AE                     553 00113$:
                            554 ;carwar.c:289: DrawPoint8(10 + j, 10 + i, 255);
                            555 ;	genCast
                            556 ;	AOP_STK for _MainLoop_i_1_1
   01AE DD 4E ED            557 	ld	c,-19(ix)
                            558 ;	genPlus
                            559 ;	genPlusIncr
   01B1 79                  560 	ld	a,c
   01B2 C6 0A               561 	add	a,#0x0A
   01B4 4F                  562 	ld	c,a
                            563 ;	genCast
                            564 ;	AOP_STK for _MainLoop_j_1_1
   01B5 DD 46 EB            565 	ld	b,-21(ix)
                            566 ;	genPlus
                            567 ;	genPlusIncr
   01B8 78                  568 	ld	a,b
   01B9 C6 0A               569 	add	a,#0x0A
   01BB 47                  570 	ld	b,a
                            571 ;	genIpush
                            572 ; _saveRegsForCall: sendSetSize: 0 deInUse: 1 bcInUse: 0 deSending: 0
   01BC D5                  573 	push	de
   01BD 3E FF               574 	ld	a,#0xFF
   01BF F5                  575 	push	af
   01C0 33                  576 	inc	sp
                            577 ;	genIpush
   01C1 79                  578 	ld	a,c
   01C2 F5                  579 	push	af
   01C3 33                  580 	inc	sp
                            581 ;	genIpush
   01C4 C5                  582 	push	bc
   01C5 33                  583 	inc	sp
                            584 ;	genCall
   01C6 CDr6As02            585 	call	_DrawPoint8
   01C9 F1                  586 	pop	af
   01CA 33                  587 	inc	sp
   01CB D1                  588 	pop	de
                            589 ;	genLabel
   01CC                     590 00120$:
                            591 ;carwar.c:284: for(j=0; j<8; j++) // characters
                            592 ;	genPlus
                            593 ;	AOP_STK for _MainLoop_j_1_1
                            594 ;	genPlusIncr
   01CC DD 34 EB            595 	inc	-21(ix)
   01CF 20 03               596 	jr	NZ,00149$
   01D1 DD 34 EC            597 	inc	-20(ix)
   01D4                     598 00149$:
                            599 ;	genGoto
   01D4 C3r56s01            600 	jp	00118$
                            601 ;	genLabel
   01D7                     602 00124$:
                            603 ;carwar.c:281: for(i=0; i<10; i++) // rows
                            604 ;	genPlus
                            605 ;	AOP_STK for _MainLoop_i_1_1
                            606 ;	genPlusIncr
   01D7 DD 34 ED            607 	inc	-19(ix)
   01DA 20 03               608 	jr	NZ,00150$
   01DC DD 34 EE            609 	inc	-18(ix)
   01DF                     610 00150$:
                            611 ;	genAssign
                            612 ;	AOP_STK for _MainLoop_i_1_1
   01DF DD 5E ED            613 	ld	e,-19(ix)
   01E2 DD 56 EE            614 	ld	d,-18(ix)
                            615 ;	genGoto
   01E5 C3r35s01            616 	jp	00122$
                            617 ;	genLabel
   01E8                     618 00145$:
                            619 ;	genAssign
                            620 ;	AOP_STK for _MainLoop_i_1_1
   01E8 DD 5E ED            621 	ld	e,-19(ix)
   01EB DD 56 EE            622 	ld	d,-18(ix)
                            623 ;carwar.c:295: for(j=0; j<256; j++) // characters
                            624 ;	genAssign
                            625 ;	AOP_STK for _MainLoop_j_1_1
   01EE DD 36 EB 00         626 	ld	-21(ix),#0x00
   01F2 DD 36 EC 00         627 	ld	-20(ix),#0x00
                            628 ;	genLabel
   01F6                     629 00126$:
                            630 ;	genCmpLt
                            631 ;	AOP_STK for _MainLoop_j_1_1
   01F6 DD 7E EB            632 	ld	a,-21(ix)
   01F9 D6 00               633 	sub	a,#0x00
   01FB DD 7E EC            634 	ld	a,-20(ix)
   01FE DE 01               635 	sbc	a,#0x01
   0200 F2r58s00            636 	jp	P,00115$
                            637 ;carwar.c:297: DrawPoint8(j, i, j);
                            638 ;	genCast
                            639 ;	AOP_STK for _MainLoop_j_1_1
   0203 DD 4E EB            640 	ld	c,-21(ix)
                            641 ;	genCast
   0206 43                  642 	ld	b,e
                            643 ;	genIpush
                            644 ; _saveRegsForCall: sendSetSize: 0 deInUse: 1 bcInUse: 0 deSending: 0
   0207 D5                  645 	push	de
   0208 79                  646 	ld	a,c
   0209 F5                  647 	push	af
   020A 33                  648 	inc	sp
                            649 ;	genIpush
   020B C5                  650 	push	bc
   020C 33                  651 	inc	sp
                            652 ;	genIpush
   020D 79                  653 	ld	a,c
   020E F5                  654 	push	af
   020F 33                  655 	inc	sp
                            656 ;	genCall
   0210 CDr6As02            657 	call	_DrawPoint8
   0213 F1                  658 	pop	af
   0214 33                  659 	inc	sp
   0215 D1                  660 	pop	de
                            661 ;carwar.c:295: for(j=0; j<256; j++) // characters
                            662 ;	genPlus
                            663 ;	AOP_STK for _MainLoop_j_1_1
                            664 ;	genPlusIncr
   0216 DD 34 EB            665 	inc	-21(ix)
   0219 20 03               666 	jr	NZ,00151$
   021B DD 34 EC            667 	inc	-20(ix)
   021E                     668 00151$:
                            669 ;	genGoto
   021E 18 D6               670 	jr	00126$
                            671 ;	genLabel
                            672 ;	genEndFunction
   0220 DD F9               673 	ld	sp,ix
   0222 DD E1               674 	pop	ix
   0224 C9                  675 	ret
   0225                     676 _MainLoop_end::
                            677 ;carwar.c:452: void SetScreen8()
                            678 ;	genLabel
                            679 ;	genFunction
                            680 ;	---------------------------------
                            681 ; Function SetScreen8
                            682 ; ---------------------------------
   0225                     683 _SetScreen8_start::
   0225                     684 _SetScreen8:
                            685 ;carwar.c:488: _endasm;
                            686 ;	genInline
                            687 	
                            688 	
                            689 	
                            690 	
   0225 3A DF F3            691 		 ld a,(#0xF3DF)
   0228 CB DF               692 		 set #3,a
   022A CB D7               693 		 set #2,a
   022C CB CF               694 		 set #1,a
   022E 32 DF F3            695 		 ld (#0xF3DF),a
                            696 	
   0231 F3                  697 		 di
                            698 	
   0232 D3 99               699 		 out (#0x99),a
   0234 3E 80               700 		 ld a,#(0x80+0)
   0236 D3 99               701 		 out (#0x99),a
                            702 	
                            703 	
   0238 3A E0 F3            704 		 ld a,(#0xF3E0)
   023B CB A7               705 		 res #4,a
   023D CB 9F               706 		 res #3,a
   023F 32 E0 F3            707 		 ld (#0xF3E0),a
                            708 	
   0242 D3 99               709 		 out (#0x99),a
   0244 3E 81               710 		 ld a,#(0x80+1)
   0246 D3 99               711 		 out (#0x99),a
                            712 	
                            713 	
   0248 3E 1F               714 		 ld a,#0x1F
   024A D3 99               715 		 out (#0x99),a
   024C 3E 82               716 		 ld a,#(0x80+2)
   024E D3 99               717 		 out (#0x99),a
                            718 	
   0250 FB                  719 		 ei
                            720 	
                            721 		
                            722 ;	genLabel
                            723 ;	genEndFunction
   0251 C9                  724 	ret
   0252                     725 _SetScreen8_end::
                            726 ;carwar.c:494: void SetPage8(i8 page)
                            727 ;	genLabel
                            728 ;	genFunction
                            729 ;	---------------------------------
                            730 ; Function SetPage8
                            731 ; ---------------------------------
   0252                     732 _SetPage8_start::
   0252                     733 _SetPage8:
   0252 DD E5               734 	push	ix
   0254 DD 21 00 00         735 	ld	ix,#0
   0258 DD 39               736 	add	ix,sp
                            737 ;carwar.c:508: _endasm;
                            738 ;	genInline
                            739 	
                            740 	
   025A DD 7E 04            741 		 ld a,4(ix)
   025D F6 1F               742 		 or #0x1F
   025F F3                  743 		 di
   0260 D3 99               744 		 out (#0x99),a
   0262 3E 82               745 		 ld a,#(0x80+2)
   0264 D3 99               746 		 out (#0x99),a
   0266 FB                  747 		 ei
                            748 	
                            749 		
                            750 ;	genLabel
                            751 ;	genEndFunction
   0267 DD E1               752 	pop	ix
   0269 C9                  753 	ret
   026A                     754 _SetPage8_end::
                            755 ;carwar.c:514: void DrawPoint8(char posX, char posY, char color)
                            756 ;	genLabel
                            757 ;	genFunction
                            758 ;	---------------------------------
                            759 ; Function DrawPoint8
                            760 ; ---------------------------------
   026A                     761 _DrawPoint8_start::
   026A                     762 _DrawPoint8:
   026A DD E5               763 	push	ix
   026C DD 21 00 00         764 	ld	ix,#0
   0270 DD 39               765 	add	ix,sp
                            766 ;carwar.c:518: WaitForVDP();
                            767 ;	genCall
                            768 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0272 CDrCDs03            769 	call	_WaitForVDP
                            770 ;carwar.c:566: _endasm;
                            771 ;	genInline
                            772 	
                            773 	
                            774 	
                            775 	
   0275 DD 7E 04            776 		 ld a,4(ix)
   0278 F3                  777 		 di
   0279 D3 99               778 		 out (#0x99),a
   027B 3E A4               779 		 ld a,#(0x80+36)
   027D D3 99               780 		 out (#0x99),a
                            781 	
   027F AF                  782 		 xor a
   0280 D3 99               783 		 out (#0x99),a
   0282 3E A5               784 		 ld a,#(0x80+37)
   0284 D3 99               785 		 out (#0x99),a
                            786 	
                            787 	
   0286 DD 7E 05            788 		 ld a,5(ix)
   0289 D3 99               789 		 out (#0x99),a
   028B 3E A6               790 		 ld a,#(0x80+38)
   028D D3 99               791 		 out (#0x99),a
                            792 	
   028F AF                  793 		 xor a
   0290 D3 99               794 		 out (#0x99),a
   0292 3E A7               795 		 ld a,#(0x80+39)
   0294 D3 99               796 		 out (#0x99),a
                            797 	
                            798 	
   0296 DD 7E 06            799 		 ld a,6(ix)
   0299 D3 99               800 		 out (#0x99),a
   029B 3E AC               801 		 ld a,#(0x80+44)
   029D D3 99               802 		 out (#0x99),a
                            803 	
                            804 	
   029F AF                  805 		 xor a
   02A0 D3 99               806 		 out (#0x99),a
   02A2 3E AD               807 		 ld a,#(0x80+45)
   02A4 D3 99               808 		 out (#0x99),a
                            809 	
                            810 	
   02A6 3E 50               811 		 ld a,#0x50
   02A8 D3 99               812 		 out (#0x99),a
   02AA 3E AE               813 		 ld a,#(0x80+46)
   02AC D3 99               814 		 out (#0x99),a
                            815 	
   02AE FB                  816 		 ei
                            817 	
                            818 		
                            819 ;	genLabel
                            820 ;	genEndFunction
   02AF DD E1               821 	pop	ix
   02B1 C9                  822 	ret
   02B2                     823 _DrawPoint8_end::
                            824 ;carwar.c:572: void DrawLine(int posX1, int posY1, int posX2, int posY2, char color)
                            825 ;	genLabel
                            826 ;	genFunction
                            827 ;	---------------------------------
                            828 ; Function DrawLine
                            829 ; ---------------------------------
   02B2                     830 _DrawLine_start::
   02B2                     831 _DrawLine:
   02B2 DD E5               832 	push	ix
   02B4 DD 21 00 00         833 	ld	ix,#0
   02B8 DD 39               834 	add	ix,sp
                            835 ;carwar.c:574: SX  = posX1; 
                            836 ;	genAssign
                            837 ;	AOP_STK for 
   02BA DD 7E 04            838 	ld	a,4(ix)
   02BD FD 21r00s00         839 	ld	iy,#_SX
   02C1 FD 77 00            840 	ld	0(iy),a
   02C4 DD 7E 05            841 	ld	a,5(ix)
   02C7 FD 77 01            842 	ld	1(iy),a
                            843 ;carwar.c:575: SY  = posY1; 
                            844 ;	genAssign
                            845 ;	AOP_STK for 
   02CA DD 7E 06            846 	ld	a,6(ix)
   02CD FD 21r02s00         847 	ld	iy,#_SY
   02D1 FD 77 00            848 	ld	0(iy),a
   02D4 DD 7E 07            849 	ld	a,7(ix)
   02D7 FD 77 01            850 	ld	1(iy),a
                            851 ;carwar.c:576: DX  = posX2; 
                            852 ;	genAssign
                            853 ;	AOP_STK for 
   02DA DD 7E 08            854 	ld	a,8(ix)
   02DD FD 21r04s00         855 	ld	iy,#_DX
   02E1 FD 77 00            856 	ld	0(iy),a
   02E4 DD 7E 09            857 	ld	a,9(ix)
   02E7 FD 77 01            858 	ld	1(iy),a
                            859 ;carwar.c:577: DY  = posY2; 
                            860 ;	genAssign
                            861 ;	AOP_STK for 
   02EA DD 7E 0A            862 	ld	a,10(ix)
   02ED FD 21r06s00         863 	ld	iy,#_DY
   02F1 FD 77 00            864 	ld	0(iy),a
   02F4 DD 7E 0B            865 	ld	a,11(ix)
   02F7 FD 77 01            866 	ld	1(iy),a
                            867 ;carwar.c:578: CLR = color;
                            868 ;	genAssign
                            869 ;	AOP_STK for 
   02FA DD 7E 0C            870 	ld	a,12(ix)
   02FD FD 21r0Cs00         871 	ld	iy,#_CLR
   0301 FD 77 00            872 	ld	0(iy),a
                            873 ;carwar.c:580: DrawLineSimple();
                            874 ;	genCall
                            875 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
                            876 ;	genLabel
                            877 ;	genEndFunction
   0304 DD E1               878 	pop	ix
   0306 C3r09s03            879 	jp	_DrawLineSimple
   0309                     880 _DrawLine_end::
                            881 ;carwar.c:586: void DrawLineSimple()
                            882 ;	genLabel
                            883 ;	genFunction
                            884 ;	---------------------------------
                            885 ; Function DrawLineSimple
                            886 ; ---------------------------------
   0309                     887 _DrawLineSimple_start::
   0309                     888 _DrawLineSimple:
                            889 ;carwar.c:588: WaitForVDP();
                            890 ;	genCall
                            891 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0309 CDrCDs03            892 	call	_WaitForVDP
                            893 ;carwar.c:660: _endasm;
                            894 ;	genInline
                            895 	
                            896 	
                            897 ;
                            898 ;
                            899 ;
                            900 ;
                            901 	
   030C                     902 	Do_Line_VDP:
                            903 ;
   030C AF                  904 		       xor a ;
   030D 2Ar06s00            905 		       ld hl,(_DY)
   0310 ED 5Br02s00         906 		       ld de,(_SY)
   0314 ED 52               907 		       sbc hl,de ;
                            908 	
   0316 17                  909 		       rla ;
   0317 32r0Ds00            910 		       ld (_ARG),a
                            911 	
   031A A7                  912 		       and a ;
   031B CAr24s03            913 		       jp z,DeltaX ;
   031E EB                  914 		       ex de,hl ;
   031F 21 00 00            915 		 ld hl,#0 ;
   0322 ED 52               916 		       sbc hl,de ;
                            917 	
                            918 ;
   0324                     919 	DeltaX:
   0324 E5                  920 	push	hl ;
   0325 AF                  921 		       xor a ;
   0326 2Ar04s00            922 		       ld hl,(_DX)
   0329 ED 5Br00s00         923 		       ld de,(_SX)
   032D ED 52               924 		       sbc hl,de ;
                            925 	
   032F 3Ar0Ds00            926 		       ld a,(_ARG)
   0332 17                  927 		       rla
   0333 17                  928 		       rla ;
   0334 32r0Ds00            929 		       ld (_ARG),a
                            930 	
   0337 CB 4F               931 		       bit 1,a ;
   0339 CAr42s03            932 		       jp z,cpHLDE ;
   033C EB                  933 		       ex de,hl ;
   033D 21 00 00            934 		 ld hl,#0 ;
   0340 ED 52               935 		       sbc hl,de ;
                            936 	
                            937 ;
   0342                     938 	cpHLDE:
   0342 D1                  939 	pop	de ;
   0343 AF                  940 		       xor a ;
                            941 	
   0344 E5                  942 		       push hl
   0345 ED 52               943 		       sbc hl,de ;
   0347 E1                  944 		       pop hl
                            945 	
   0348 3Ar0Ds00            946 		       ld a,(_ARG)
   034B 17                  947 		       rla ;
   034C 32r0Ds00            948 		       ld (_ARG),a
                            949 	
   034F CB 47               950 		       bit 0,a ;
   0351 CAr55s03            951 		       jp z,DoIt ;
   0354 EB                  952 		       ex de,hl ;
                            953 	
                            954 ;
   0355                     955 	DoIt:
   0355 22r08s00            956 	ld	(_NX),hl
   0358 ED 53r0As00         957 		       ld (_NY),de
                            958 	
   035C 2Ar00s00            959 		       ld hl,(_SX)
   035F 22r04s00            960 		       ld (_DX),hl
                            961 	
   0362 2Ar02s00            962 		       ld hl,(_SY)
   0365 22r06s00            963 		       ld (_DY),hl
                            964 	
   0368 3E 70               965 		       ld a,#0x70 ;
   036A 32r0Es00            966 		       ld (_CMD),a ;
                            967 	
                            968 		
                            969 ;carwar.c:662: VPDCommand((int)&SX);
                            970 ;	genCast
   036D 0Er00               971 	ld	c,#<_SX
   036F 06s00               972 	ld	b,#>_SX
                            973 ;	genIpush
                            974 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0371 C5                  975 	push	bc
                            976 ;	genCall
   0372 CDr84s03            977 	call	_VPDCommand
   0375 F1                  978 	pop	af
                            979 ;	genLabel
                            980 ;	genEndFunction
   0376 C9                  981 	ret
   0377                     982 _DrawLineSimple_end::
                            983 ;carwar.c:668: void DrawLine8(char posX1, char posY1, char posX2, char posY2, char color)
                            984 ;	genLabel
                            985 ;	genFunction
                            986 ;	---------------------------------
                            987 ; Function DrawLine8
                            988 ; ---------------------------------
   0377                     989 _DrawLine8_start::
   0377                     990 _DrawLine8:
   0377 DD E5               991 	push	ix
   0379 DD 21 00 00         992 	ld	ix,#0
   037D DD 39               993 	add	ix,sp
                            994 ;carwar.c:672: WaitForVDP();
                            995 ;	genCall
                            996 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
                            997 ;	genLabel
                            998 ;	genEndFunction
   037F DD E1               999 	pop	ix
   0381 C3rCDs03           1000 	jp	_WaitForVDP
   0384                    1001 _DrawLine8_end::
                           1002 ;carwar.c:806: void VPDCommand(int address)
                           1003 ;	genLabel
                           1004 ;	genFunction
                           1005 ;	---------------------------------
                           1006 ; Function VPDCommand
                           1007 ; ---------------------------------
   0384                    1008 _VPDCommand_start::
   0384                    1009 _VPDCommand:
   0384 DD E5              1010 	push	ix
   0386 DD 21 00 00        1011 	ld	ix,#0
   038A DD 39              1012 	add	ix,sp
                           1013 ;carwar.c:810: WaitForVDP();
                           1014 ;	genCall
                           1015 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   038C CDrCDs03           1016 	call	_WaitForVDP
                           1017 ;carwar.c:841: _endasm;
                           1018 ;	genInline
                           1019 	
                           1020 	
   038F DD 6E 04           1021 		 ld l,4(ix)
   0392 DD 66 05           1022 		 ld h,5(ix)
                           1023 	
                           1024 	
   0395 3E 20              1025 		 ld a,#32
   0397 F3                 1026 		 di
   0398 D3 99              1027 		 out (#0x99),a
   039A 3E 91              1028 		 ld a,#(0x80+17)
   039C D3 99              1029 		 out (#0x99),a
   039E 0E 9B              1030 		 ld c,#0x99 +#2
   03A0 ED A3              1031 		 outi
   03A2 ED A3              1032 		 outi
   03A4 ED A3              1033 		 outi
   03A6 ED A3              1034 		 outi
   03A8 ED A3              1035 		 outi
   03AA ED A3              1036 		 outi
   03AC ED A3              1037 		 outi
   03AE ED A3              1038 		 outi
   03B0 ED A3              1039 		 outi
   03B2 ED A3              1040 		 outi
   03B4 ED A3              1041 		 outi
   03B6 ED A3              1042 		 outi
   03B8 ED A3              1043 		 outi
   03BA ED A3              1044 		 outi
   03BC FB                 1045 		 ei
   03BD ED A3              1046 		 outi
                           1047 	
                           1048 		
                           1049 ;	genLabel
                           1050 ;	genEndFunction
   03BF DD E1              1051 	pop	ix
   03C1 C9                 1052 	ret
   03C2                    1053 _VPDCommand_end::
                           1054 ;carwar.c:847: void waitRetrace()
                           1055 ;	genLabel
                           1056 ;	genFunction
                           1057 ;	---------------------------------
                           1058 ; Function waitRetrace
                           1059 ; ---------------------------------
   03C2                    1060 _waitRetrace_start::
   03C2                    1061 _waitRetrace:
                           1062 ;carwar.c:859: _endasm;
                           1063 ;	genInline
                           1064 	
                           1065 	
   03C2 F3                 1066 		 di
   03C3                    1067 	 WAIT_RETRACE:
   03C3 DB 99              1068 		 in a,(0x99)
   03C5 E6 80              1069 		 and #0x80
   03C7 FE 00              1070 		 cp #0
   03C9 28 F8              1071 		 jr z, WAIT_RETRACE
   03CB FB                 1072 		 ei
                           1073 	
                           1074 		
                           1075 ;	genLabel
                           1076 ;	genEndFunction
   03CC C9                 1077 	ret
   03CD                    1078 _waitRetrace_end::
                           1079 ;carwar.c:865: void WaitForVDP()
                           1080 ;	genLabel
                           1081 ;	genFunction
                           1082 ;	---------------------------------
                           1083 ; Function WaitForVDP
                           1084 ; ---------------------------------
   03CD                    1085 _WaitForVDP_start::
   03CD                    1086 _WaitForVDP:
                           1087 ;carwar.c:886: _endasm;
                           1088 ;	genInline
                           1089 	
                           1090 	
                           1091 	
   03CD 3E 02              1092 		 ld a,#2
   03CF F3                 1093 		 di
   03D0 D3 99              1094 		 out (#0x99),a
   03D2 3E 8F              1095 		 ld a,#(0x80+15)
   03D4 D3 99              1096 		 out (#0x99),a
   03D6                    1097 	 WAIT_VDP:
   03D6 00                 1098 		 nop
   03D7 DB 99              1099 		 in a,(#0x99)
   03D9 1F                 1100 		 rra
   03DA 38 FA              1101 		 jr c,WAIT_VDP
   03DC AF                 1102 		 xor a
   03DD D3 99              1103 		 out (#0x99),a
   03DF 3E 8F              1104 		 ld a,#(0x80+15)
   03E1 D3 99              1105 		 out (#0x99),a
   03E3 FB                 1106 		 ei
                           1107 	
                           1108 		
                           1109 ;	genLabel
                           1110 ;	genEndFunction
   03E4 C9                 1111 	ret
   03E5                    1112 _WaitForVDP_end::
                           1113 ;carwar.c:890: char Joystick(char n)
                           1114 ;	genLabel
                           1115 ;	genFunction
                           1116 ;	---------------------------------
                           1117 ; Function Joystick
                           1118 ; ---------------------------------
   03E5                    1119 _Joystick_start::
   03E5                    1120 _Joystick:
   03E5 DD E5              1121 	push	ix
   03E7 DD 21 00 00        1122 	ld	ix,#0
   03EB DD 39              1123 	add	ix,sp
                           1124 ;carwar.c:897: _endasm;
                           1125 ;	genInline
                           1126 	
   03ED DD 7E 04           1127 		 ld a,4(ix)
   03F0 CD D5 00           1128 		 call 0x00d5
   03F3 6F                 1129 		 ld l,a
                           1130 		
                           1131 ;	genLabel
                           1132 ;	genEndFunction
   03F4 DD E1              1133 	pop	ix
   03F6 C9                 1134 	ret
   03F7                    1135 _Joystick_end::
                           1136 ;carwar.c:901: char Joytrig(char n)
                           1137 ;	genLabel
                           1138 ;	genFunction
                           1139 ;	---------------------------------
                           1140 ; Function Joytrig
                           1141 ; ---------------------------------
   03F7                    1142 _Joytrig_start::
   03F7                    1143 _Joytrig:
   03F7 DD E5              1144 	push	ix
   03F9 DD 21 00 00        1145 	ld	ix,#0
   03FD DD 39              1146 	add	ix,sp
                           1147 ;carwar.c:909: _endasm;
                           1148 ;	genInline
                           1149 	
   03FF DD 7E 04           1150 		 ld a,4(ix)
   0402 CD D8 00           1151 		 call 0x00d8
   0405 26 00              1152 		 ld h,#0x00
   0407 6F                 1153 		 ld l,a
                           1154 		
                           1155 ;	genLabel
                           1156 ;	genEndFunction
   0408 DD E1              1157 	pop	ix
   040A C9                 1158 	ret
   040B                    1159 _Joytrig_end::
                           1160 ;carwar.c:913: u8 GetKeyMatrixLine(u8 n)
                           1161 ;	genLabel
                           1162 ;	genFunction
                           1163 ;	---------------------------------
                           1164 ; Function GetKeyMatrixLine
                           1165 ; ---------------------------------
   040B                    1166 _GetKeyMatrixLine_start::
   040B                    1167 _GetKeyMatrixLine:
   040B DD E5              1168 	push	ix
   040D DD 21 00 00        1169 	ld	ix,#0
   0411 DD 39              1170 	add	ix,sp
                           1171 ;carwar.c:920: _endasm;
                           1172 ;	genInline
                           1173 	
   0413 DD 7E 04           1174 		 ld a,4(ix)
   0416 CD 41 01           1175 		 call 0x0141
   0419 6F                 1176 		 ld l,a
                           1177 		
                           1178 ;	genLabel
                           1179 ;	genEndFunction
   041A DD E1              1180 	pop	ix
   041C C9                 1181 	ret
   041D                    1182 _GetKeyMatrixLine_end::
                           1183 ;carwar.c:923: void SetTo50Hz()
                           1184 ;	genLabel
                           1185 ;	genFunction
                           1186 ;	---------------------------------
                           1187 ; Function SetTo50Hz
                           1188 ; ---------------------------------
   041D                    1189 _SetTo50Hz_start::
   041D                    1190 _SetTo50Hz:
                           1191 ;carwar.c:925: WaitForVDP();
                           1192 ;	genCall
                           1193 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   041D CDrCDs03           1194 	call	_WaitForVDP
                           1195 ;carwar.c:937: _endasm;
                           1196 ;	genInline
                           1197 	
                           1198 	
   0420 3E 02              1199 		 ld a,#2
   0422 F3                 1200 		 di
   0423 D3 99              1201 		 out (#0x99),a ;
                           1202 	
   0425 3E 89              1203 		 ld a,#(0x80+9)
   0427 D3 99              1204 		 out (#0x99),a ;
                           1205 	
   0429 FB                 1206 		 ei
                           1207 		
                           1208 ;	genLabel
                           1209 ;	genEndFunction
   042A C9                 1210 	ret
   042B                    1211 _SetTo50Hz_end::
                           1212 ;carwar.c:940: void SetTo60Hz()
                           1213 ;	genLabel
                           1214 ;	genFunction
                           1215 ;	---------------------------------
                           1216 ; Function SetTo60Hz
                           1217 ; ---------------------------------
   042B                    1218 _SetTo60Hz_start::
   042B                    1219 _SetTo60Hz:
                           1220 ;carwar.c:942: WaitForVDP();
                           1221 ;	genCall
                           1222 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   042B CDrCDs03           1223 	call	_WaitForVDP
                           1224 ;carwar.c:954: _endasm;
                           1225 ;	genInline
                           1226 	
                           1227 	
   042E 3E 00              1228 		 ld a,#0
   0430 F3                 1229 		 di
   0431 D3 99              1230 		 out (#0x99),a ;
                           1231 	
   0433 3E 89              1232 		 ld a,#(0x80+9)
   0435 D3 99              1233 		 out (#0x99),a ;
                           1234 	
   0437 FB                 1235 		 ei
                           1236 		
                           1237 ;	genLabel
                           1238 ;	genEndFunction
   0438 C9                 1239 	ret
   0439                    1240 _SetTo60Hz_end::
                           1241 ;carwar.c:960: void WriteToVRAM8(i16 addr, u8 value)
                           1242 ;	genLabel
                           1243 ;	genFunction
                           1244 ;	---------------------------------
                           1245 ; Function WriteToVRAM8
                           1246 ; ---------------------------------
   0439                    1247 _WriteToVRAM8_start::
   0439                    1248 _WriteToVRAM8:
   0439 DD E5              1249 	push	ix
   043B DD 21 00 00        1250 	ld	ix,#0
   043F DD 39              1251 	add	ix,sp
                           1252 ;carwar.c:964: WaitForVDP();
                           1253 ;	genCall
                           1254 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0441 CDrCDs03           1255 	call	_WaitForVDP
                           1256 ;carwar.c:991: _endasm;
                           1257 ;	genInline
                           1258 	
                           1259 		 ;
   0444 DD 7E 05           1260 		 ld a,5(ix) ;
   0447 E6 C0              1261 		 and #0xC0 ;
   0449 17                 1262 		       rla
   044A 17                 1263 		       rla
   044B F3                 1264 		 di
   044C D3 99              1265 		 out (#0x99),a
   044E 3E 8E              1266 		 ld a,#(0x80+14)
   0450 D3 99              1267 		 out (#0x99),a
                           1268 	
   0452 DD 7E 04           1269 		 ld a,4(ix) ;
   0455 D3 99              1270 		 out (#0x99),a
                           1271 	
   0457 DD 7E 05           1272 		 ld a,5(ix) ;
   045A E6 3F              1273 		 and #0x3F ;
   045C F6 40              1274 		 or #0x40 ;
   045E D3 99              1275 		 out (#0x99),a
                           1276 	
                           1277 		 ;
   0460 DD 7E 06           1278 		 ld a,6(ix)
   0463 D3 98              1279 		 out (#0x98),a
                           1280 	
   0465 FB                 1281 		 ei
                           1282 		
                           1283 ;	genLabel
                           1284 ;	genEndFunction
   0466 DD E1              1285 	pop	ix
   0468 C9                 1286 	ret
   0469                    1287 _WriteToVRAM8_end::
                           1288 ;carwar.c:1098: void HMMC(u8 page, u8 dx, u8 dy, u8 nx, u8 ny, u16 ram)
                           1289 ;	genLabel
                           1290 ;	genFunction
                           1291 ;	---------------------------------
                           1292 ; Function HMMC
                           1293 ; ---------------------------------
   0469                    1294 _HMMC_start::
   0469                    1295 _HMMC:
   0469 DD E5              1296 	push	ix
   046B DD 21 00 00        1297 	ld	ix,#0
   046F DD 39              1298 	add	ix,sp
   0471 21 ED FF           1299 	ld	hl,#-19
   0474 39                 1300 	add	hl,sp
   0475 F9                 1301 	ld	sp,hl
                           1302 ;carwar.c:1104: buffer.DX = dx;
                           1303 ;	genAddrOf
   0476 21 04 00           1304 	ld	hl,#0x0004
   0479 39                 1305 	add	hl,sp
   047A 4D                 1306 	ld	c,l
   047B 44                 1307 	ld	b,h
                           1308 ;	genPlus
                           1309 ;	AOP_STK for _HMMC_sloc0_1_0
                           1310 ;	genPlusIncr
   047C 79                 1311 	ld	a,c
   047D C6 04              1312 	add	a,#0x04
   047F DD 77 EF           1313 	ld	-17(ix),a
   0482 78                 1314 	ld	a,b
   0483 CE 00              1315 	adc	a,#0x00
   0485 DD 77 F0           1316 	ld	-16(ix),a
                           1317 ;	genCast
                           1318 ;	AOP_STK for 
   0488 DD 5E 05           1319 	ld	e,5(ix)
   048B 16 00              1320 	ld	d,#0x00
                           1321 ;	genAssign (pointer)
                           1322 ;	AOP_STK for _HMMC_sloc0_1_0
                           1323 ;	isBitvar = 0
   048D DD 6E EF           1324 	ld	l,-17(ix)
   0490 DD 66 F0           1325 	ld	h,-16(ix)
   0493 73                 1326 	ld	(hl),e
   0494 23                 1327 	inc	hl
   0495 72                 1328 	ld	(hl),d
                           1329 ;carwar.c:1105: buffer.DY = dy /*+ (page * 512)*/;
                           1330 ;	genPlus
                           1331 ;	AOP_STK for _HMMC_sloc1_1_0
                           1332 ;	genPlusIncr
   0496 79                 1333 	ld	a,c
   0497 C6 06              1334 	add	a,#0x06
   0499 DD 77 ED           1335 	ld	-19(ix),a
   049C 78                 1336 	ld	a,b
   049D CE 00              1337 	adc	a,#0x00
   049F DD 77 EE           1338 	ld	-18(ix),a
                           1339 ;	genCast
                           1340 ;	AOP_STK for 
   04A2 DD 5E 06           1341 	ld	e,6(ix)
   04A5 16 00              1342 	ld	d,#0x00
                           1343 ;	genAssign (pointer)
                           1344 ;	AOP_STK for _HMMC_sloc1_1_0
                           1345 ;	isBitvar = 0
   04A7 DD 6E ED           1346 	ld	l,-19(ix)
   04AA DD 66 EE           1347 	ld	h,-18(ix)
   04AD 73                 1348 	ld	(hl),e
   04AE 23                 1349 	inc	hl
   04AF 72                 1350 	ld	(hl),d
                           1351 ;carwar.c:1106: buffer.NX = nx;
                           1352 ;	genPlus
                           1353 ;	AOP_STK for _HMMC_sloc1_1_0
                           1354 ;	genPlusIncr
   04B0 79                 1355 	ld	a,c
   04B1 C6 08              1356 	add	a,#0x08
   04B3 DD 77 ED           1357 	ld	-19(ix),a
   04B6 78                 1358 	ld	a,b
   04B7 CE 00              1359 	adc	a,#0x00
   04B9 DD 77 EE           1360 	ld	-18(ix),a
                           1361 ;	genCast
                           1362 ;	AOP_STK for 
   04BC DD 5E 07           1363 	ld	e,7(ix)
   04BF 16 00              1364 	ld	d,#0x00
                           1365 ;	genAssign (pointer)
                           1366 ;	AOP_STK for _HMMC_sloc1_1_0
                           1367 ;	isBitvar = 0
   04C1 DD 6E ED           1368 	ld	l,-19(ix)
   04C4 DD 66 EE           1369 	ld	h,-18(ix)
   04C7 73                 1370 	ld	(hl),e
   04C8 23                 1371 	inc	hl
   04C9 72                 1372 	ld	(hl),d
                           1373 ;carwar.c:1107: buffer.NY = ny;
                           1374 ;	genPlus
                           1375 ;	AOP_STK for _HMMC_sloc1_1_0
                           1376 ;	genPlusIncr
   04CA 79                 1377 	ld	a,c
   04CB C6 0A              1378 	add	a,#0x0A
   04CD DD 77 ED           1379 	ld	-19(ix),a
   04D0 78                 1380 	ld	a,b
   04D1 CE 00              1381 	adc	a,#0x00
   04D3 DD 77 EE           1382 	ld	-18(ix),a
                           1383 ;	genCast
                           1384 ;	AOP_STK for 
   04D6 DD 5E 08           1385 	ld	e,8(ix)
   04D9 16 00              1386 	ld	d,#0x00
                           1387 ;	genAssign (pointer)
                           1388 ;	AOP_STK for _HMMC_sloc1_1_0
                           1389 ;	isBitvar = 0
   04DB DD 6E ED           1390 	ld	l,-19(ix)
   04DE DD 66 EE           1391 	ld	h,-18(ix)
   04E1 73                 1392 	ld	(hl),e
   04E2 23                 1393 	inc	hl
   04E3 72                 1394 	ld	(hl),d
                           1395 ;carwar.c:1108: buffer.CLR = 252;//((u8*)ram)[0];
                           1396 ;	genPlus
                           1397 ;	genPlusIncr
   04E4 79                 1398 	ld	a,c
   04E5 C6 0C              1399 	add	a,#0x0C
   04E7 5F                 1400 	ld	e,a
   04E8 78                 1401 	ld	a,b
   04E9 CE 00              1402 	adc	a,#0x00
   04EB 57                 1403 	ld	d,a
                           1404 ;	genAssign (pointer)
                           1405 ;	isBitvar = 0
   04EC 3E FC              1406 	ld	a,#0xFC
   04EE 12                 1407 	ld	(de),a
                           1408 ;carwar.c:1109: buffer.ARG = 0;
                           1409 ;	genPlus
                           1410 ;	genPlusIncr
   04EF 79                 1411 	ld	a,c
   04F0 C6 0D              1412 	add	a,#0x0D
   04F2 5F                 1413 	ld	e,a
   04F3 78                 1414 	ld	a,b
   04F4 CE 00              1415 	adc	a,#0x00
   04F6 57                 1416 	ld	d,a
                           1417 ;	genAssign (pointer)
                           1418 ;	isBitvar = 0
   04F7 3E 00              1419 	ld	a,#0x00
   04F9 12                 1420 	ld	(de),a
                           1421 ;carwar.c:1110: buffer.CMD = 0xF0;
                           1422 ;	genPlus
                           1423 ;	genPlusIncr
   04FA 79                 1424 	ld	a,c
   04FB C6 0E              1425 	add	a,#0x0E
   04FD 4F                 1426 	ld	c,a
   04FE 78                 1427 	ld	a,b
   04FF CE 00              1428 	adc	a,#0x00
   0501 47                 1429 	ld	b,a
                           1430 ;	genAssign (pointer)
                           1431 ;	isBitvar = 0
   0502 3E F0              1432 	ld	a,#0xF0
   0504 02                 1433 	ld	(bc),a
                           1434 ;carwar.c:1111: SetupHMMC((u16)&buffer.DX);
                           1435 ;	genAssign
                           1436 ;	AOP_STK for _HMMC_sloc0_1_0
   0505 DD 4E EF           1437 	ld	c,-17(ix)
   0508 DD 46 F0           1438 	ld	b,-16(ix)
                           1439 ;	genCast
                           1440 ;	genIpush
                           1441 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   050B C5                 1442 	push	bc
                           1443 ;	genCall
   050C CDr35s05           1444 	call	_SetupHMMC
   050F F1                 1445 	pop	af
                           1446 ;carwar.c:1152: _endasm;
                           1447 ;	genInline
                           1448 	
                           1449 	
   0510 F3                 1450 		 di
                           1451 	
   0511                    1452 	 SEND_NEXT_COLOR:
                           1453 	
                           1454 		 ;
                           1455 		 ;
   0511 3E FC              1456 		 ld a,#252
   0513 D3 99              1457 		 out (#0x99),a
   0515 3E AC              1458 		 ld a,#(0x80+44)
   0517 D3 99              1459 		 out (#0x99),a
                           1460 	
   0519                    1461 	 WAIT_REG2:
                           1462 	
                           1463 		 ;
                           1464 		 ;
   0519 3E 02              1465 		 ld a,#2
   051B D3 99              1466 		 out (#0x99),a
   051D 3E 8F              1467 		 ld a,#(0x80+15)
   051F D3 99              1468 		 out (#0x99),a
                           1469 	
                           1470 		 ;
   0521 00                 1471 		 nop
   0522 DB 99              1472 		 in a,(#0x99)
   0524 47                 1473 		 ld b,a ;
   0525 1F                 1474 		 rra ;
   0526 30 07              1475 		 jr nc,COLOR_COPY_END
                           1476 	
                           1477 		 ;
                           1478 		 ;
   0528 78                 1479 		 ld a,b ;
   0529 17                 1480 		 rla ;
   052A 30 ED              1481 		 jr nc,WAIT_REG2
   052C C3r11s05           1482 		 jp SEND_NEXT_COLOR
                           1483 	
   052F                    1484 	 COLOR_COPY_END:
                           1485 	
   052F FB                 1486 		 ei
                           1487 	
                           1488 		
                           1489 ;	genLabel
                           1490 ;	genEndFunction
   0530 DD F9              1491 	ld	sp,ix
   0532 DD E1              1492 	pop	ix
   0534 C9                 1493 	ret
   0535                    1494 _HMMC_end::
                           1495 ;carwar.c:1175: void SetupHMMC(u16 address)
                           1496 ;	genLabel
                           1497 ;	genFunction
                           1498 ;	---------------------------------
                           1499 ; Function SetupHMMC
                           1500 ; ---------------------------------
   0535                    1501 _SetupHMMC_start::
   0535                    1502 _SetupHMMC:
   0535 DD E5              1503 	push	ix
   0537 DD 21 00 00        1504 	ld	ix,#0
   053B DD 39              1505 	add	ix,sp
                           1506 ;carwar.c:1179: WaitForVDP();
                           1507 ;	genCall
                           1508 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   053D CDrCDs03           1509 	call	_WaitForVDP
                           1510 ;carwar.c:1205: _endasm;
                           1511 ;	genInline
                           1512 	
                           1513 	
   0540 DD 6E 04           1514 		 ld l,4(ix)
   0543 DD 66 05           1515 		 ld h,5(ix)
                           1516 		 ;
   0546 3E 24              1517 		 ld a,#36 ;
   0548 F3                 1518 		 di
   0549 D3 99              1519 		 out (#0x99),a
   054B 3E 91              1520 		 ld a,#(0x80+17)
   054D D3 99              1521 		 out (#0x99),a ;
   054F 0E 9B              1522 		 ld c,#0x99 +#2 ;
   0551 ED A3              1523 		 outi
   0553 ED A3              1524 		 outi
   0555 ED A3              1525 		 outi
   0557 ED A3              1526 		 outi
   0559 ED A3              1527 		 outi
   055B ED A3              1528 		 outi
   055D ED A3              1529 		 outi
   055F ED A3              1530 		 outi
   0561 ED A3              1531 		 outi
   0563 ED A3              1532 		 outi
   0565 FB                 1533 		 ei ;
   0566 ED A3              1534 		 outi
                           1535 	
                           1536 		
                           1537 ;	genLabel
                           1538 ;	genEndFunction
   0568 DD E1              1539 	pop	ix
   056A C9                 1540 	ret
   056B                    1541 _SetupHMMC_end::
                           1542 	.area _CODE
                           1543 	.area _CABS
