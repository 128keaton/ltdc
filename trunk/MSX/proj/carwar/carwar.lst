                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.8.0 #5117 (Mar 23 2008) (MINGW32)
                              4 ; This file was generated Sun Jan 23 15:39:42 2011
                              5 ;--------------------------------------------------------
                              6 	.module carwar
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _main
                             13 	.globl _g_Sprite
                             14 	.globl _MainLoop
                             15 	.globl _SetScreen8
                             16 	.globl _SetPage8
                             17 	.globl _DrawPoint8
                             18 	.globl _DrawLine8
                             19 	.globl _VPDCommand
                             20 	.globl _waitRetrace
                             21 	.globl _WaitForVDP
                             22 	.globl _Joystick
                             23 	.globl _Joytrig
                             24 	.globl _GetKeyMatrixLine
                             25 	.globl _SetTo50Hz
                             26 	.globl _SetTo60Hz
                             27 	.globl _WriteToVRAM8
                             28 	.globl _HMMC
                             29 	.globl _SetupHMMC
                             30 ;--------------------------------------------------------
                             31 ; special function registers
                             32 ;--------------------------------------------------------
                    00A8     33 _g_slotPort	=	0x00a8
                             34 ;--------------------------------------------------------
                             35 ;  ram data
                             36 ;--------------------------------------------------------
                             37 	.area _DATA
                             38 ;--------------------------------------------------------
                             39 ; overlayable items in  ram 
                             40 ;--------------------------------------------------------
                             41 	.area _OVERLAY
                             42 ;--------------------------------------------------------
                             43 ; external initialized ram data
                             44 ;--------------------------------------------------------
                             45 ;--------------------------------------------------------
                             46 ; global & static initialisations
                             47 ;--------------------------------------------------------
                             48 	.area _HOME
                             49 	.area _GSINIT
                             50 	.area _GSFINAL
                             51 	.area _GSINIT
                             52 ;--------------------------------------------------------
                             53 ; Home
                             54 ;--------------------------------------------------------
                             55 	.area _HOME
                             56 	.area _HOME
                             57 ;--------------------------------------------------------
                             58 ; code
                             59 ;--------------------------------------------------------
                             60 	.area _CODE
                             61 ;carwar.c:171: void main(void)
                             62 ;	genLabel
                             63 ;	genFunction
                             64 ;	---------------------------------
                             65 ; Function main
                             66 ; ---------------------------------
   0000                      67 _main_start::
   0000                      68 _main:
                             69 ;carwar.c:177: _endasm;
                             70 ;	genInline
                             71 	
   0000 F3                   72 		 di
   0001 ED 7B 4A FC          73 		 ld sp, (#0xFC4A)
   0005 FB                   74 		 ei
                             75 		
                             76 ;carwar.c:179: g_slotPort = (g_slotPort & 0xCF) | ((g_slotPort & 0x0C) << 2);
                             77 ;	genAnd
                             78 ;Z80 AOP_SFR for _g_slotPort banked:0 bc:1 de:0
   0006 DB A8                79 	in	a,(_g_slotPort)
   0008 E6 CF                80 	and	a,#0xCF
   000A 4F                   81 	ld	c,a
                             82 ;	genAnd
                             83 ;Z80 AOP_SFR for _g_slotPort banked:0 bc:1 de:0
   000B DB A8                84 	in	a,(_g_slotPort)
   000D E6 0C                85 	and	a,#0x0C
   000F 47                   86 	ld	b,a
                             87 ;	genLeftShift
   0010 CB 20                88 	sla	b
   0012 CB 20                89 	sla	b
                             90 ;	genOr
                             91 ;Z80 AOP_SFR for _g_slotPort banked:0 bc:1 de:0
   0014 79                   92 	ld	a,c
   0015 B0                   93 	or	a,b
   0016 D3 A8                94 	out	(_g_slotPort),a
                             95 ;carwar.c:181: MainLoop();
                             96 ;	genCall
                             97 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
                             98 ;	genLabel
                             99 ;	genEndFunction
   0018 C3r5Bs00            100 	jp	_MainLoop
   001B                     101 _main_end::
   001B                     102 _g_Sprite:
   001B FE                  103 	.db #0xFE
   001C FE                  104 	.db #0xFE
   001D FE                  105 	.db #0xFE
   001E FE                  106 	.db #0xFE
   001F FE                  107 	.db #0xFE
   0020 FE                  108 	.db #0xFE
   0021 FE                  109 	.db #0xFE
   0022 FE                  110 	.db #0xFE
   0023 FE                  111 	.db #0xFE
   0024 64                  112 	.db #0x64
   0025 00                  113 	.db #0x00
   0026 00                  114 	.db #0x00
   0027 00                  115 	.db #0x00
   0028 00                  116 	.db #0x00
   0029 C8                  117 	.db #0xC8
   002A FE                  118 	.db #0xFE
   002B FE                  119 	.db #0xFE
   002C 00                  120 	.db #0x00
   002D 64                  121 	.db #0x64
   002E 00                  122 	.db #0x00
   002F 00                  123 	.db #0x00
   0030 C8                  124 	.db #0xC8
   0031 00                  125 	.db #0x00
   0032 FE                  126 	.db #0xFE
   0033 FE                  127 	.db #0xFE
   0034 00                  128 	.db #0x00
   0035 00                  129 	.db #0x00
   0036 64                  130 	.db #0x64
   0037 C8                  131 	.db #0xC8
   0038 00                  132 	.db #0x00
   0039 00                  133 	.db #0x00
   003A FE                  134 	.db #0xFE
   003B FE                  135 	.db #0xFE
   003C 00                  136 	.db #0x00
   003D 00                  137 	.db #0x00
   003E C8                  138 	.db #0xC8
   003F 64                  139 	.db #0x64
   0040 00                  140 	.db #0x00
   0041 00                  141 	.db #0x00
   0042 FE                  142 	.db #0xFE
   0043 FE                  143 	.db #0xFE
   0044 00                  144 	.db #0x00
   0045 C8                  145 	.db #0xC8
   0046 00                  146 	.db #0x00
   0047 00                  147 	.db #0x00
   0048 64                  148 	.db #0x64
   0049 00                  149 	.db #0x00
   004A FE                  150 	.db #0xFE
   004B FE                  151 	.db #0xFE
   004C C8                  152 	.db #0xC8
   004D 00                  153 	.db #0x00
   004E 00                  154 	.db #0x00
   004F 00                  155 	.db #0x00
   0050 00                  156 	.db #0x00
   0051 64                  157 	.db #0x64
   0052 FE                  158 	.db #0xFE
   0053 FE                  159 	.db #0xFE
   0054 FE                  160 	.db #0xFE
   0055 FE                  161 	.db #0xFE
   0056 FE                  162 	.db #0xFE
   0057 FE                  163 	.db #0xFE
   0058 FE                  164 	.db #0xFE
   0059 FE                  165 	.db #0xFE
   005A FE                  166 	.db #0xFE
                            167 ;carwar.c:190: void MainLoop()
                            168 ;	genLabel
                            169 ;	genFunction
                            170 ;	---------------------------------
                            171 ; Function MainLoop
                            172 ; ---------------------------------
   005B                     173 _MainLoop_start::
   005B                     174 _MainLoop:
   005B DD E5               175 	push	ix
   005D DD 21 00 00         176 	ld	ix,#0
   0061 DD 39               177 	add	ix,sp
   0063 21 E9 FF            178 	ld	hl,#-23
   0066 39                  179 	add	hl,sp
   0067 F9                  180 	ld	sp,hl
                            181 ;carwar.c:192: u8 clsScreen8[15] = 
                            182 ;	genAddrOf
   0068 21 08 00            183 	ld	hl,#0x0008
   006B 39                  184 	add	hl,sp
   006C 4D                  185 	ld	c,l
   006D 44                  186 	ld	b,h
                            187 ;	genArrayInit
                            188 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 1 deSending: 0
   006E C5                  189 	push	bc
   006F 69                  190 	ld	l,c
   0070 60                  191 	ld	h,b
   0071 CDr00s00            192 	call	__initrleblock
   0074 F7 00               193 	.db	#-9,#0x00
   0076 06                  194 	.db	6
   0077 01 D4 00 00 00 C0   195 	.db	0x01, 0xD4, 0x00, 0x00, 0x00, 0xC0
   007D 00                  196 	.db	0
   007E C1                  197 	pop	bc
                            198 ;carwar.c:197: u8 x = 128, y = 128;
                            199 ;	genAssign
                            200 ;	AOP_STK for _MainLoop_x_1_1
   007F DD 36 F0 80         201 	ld	-16(ix),#0x80
                            202 ;	genAssign
                            203 ;	AOP_STK for _MainLoop_y_1_1
   0083 DD 36 EF 80         204 	ld	-17(ix),#0x80
                            205 ;carwar.c:219: SetTo60Hz();
                            206 ;	genCall
                            207 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0087 CDrA6s03            208 	call	_SetTo60Hz
                            209 ;carwar.c:220: SetScreen8();
                            210 ;	genCall
                            211 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   008A CDr65s02            212 	call	_SetScreen8
                            213 ;carwar.c:224: VPDCommand((int)&clsScreen8);
                            214 ;	genAddrOf
   008D 21 08 00            215 	ld	hl,#0x0008
   0090 39                  216 	add	hl,sp
   0091 5D                  217 	ld	e,l
   0092 54                  218 	ld	d,h
                            219 ;	genCast
                            220 ;	genIpush
                            221 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0093 D5                  222 	push	de
                            223 ;	genCall
   0094 CDrFFs02            224 	call	_VPDCommand
   0097 F1                  225 	pop	af
                            226 ;carwar.c:226: while(bEnd == 0)
                            227 ;	genLabel
   0098                     228 00115$:
                            229 ;carwar.c:236: addr = x + (y << 8);
                            230 ;	genCast
                            231 ;	AOP_STK for _MainLoop_x_1_1
   0098 DD 5E F0            232 	ld	e,-16(ix)
   009B 16 00               233 	ld	d,#0x00
                            234 ;	genCast
                            235 ;	AOP_STK for _MainLoop_y_1_1
   009D DD 46 EF            236 	ld	b,-17(ix)
                            237 ;	genLeftShift
   00A0 48                  238 	ld	c,b
   00A1 06 00               239 	ld	b,#0x00
                            240 ;	genPlus
   00A3 7B                  241 	ld	a,e
   00A4 80                  242 	add	a,b
   00A5 47                  243 	ld	b,a
   00A6 7A                  244 	ld	a,d
   00A7 89                  245 	adc	a,c
   00A8 4F                  246 	ld	c,a
                            247 ;	genAssign
                            248 ;	(registers are the same)
                            249 ;carwar.c:237: WriteToVRAM8(addr, 0x0F);
                            250 ;	genIpush
                            251 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00A9 3E 0F               252 	ld	a,#0x0F
   00AB F5                  253 	push	af
   00AC 33                  254 	inc	sp
                            255 ;	genIpush
   00AD 68                  256 	ld	l,b
   00AE 61                  257 	ld	h,c
   00AF E5                  258 	push	hl
                            259 ;	genCall
   00B0 CDrB4s03            260 	call	_WriteToVRAM8
   00B3 F1                  261 	pop	af
   00B4 33                  262 	inc	sp
                            263 ;carwar.c:238: HMMC(0, 100, 100, 8, 8, (u16)&g_Sprite);
                            264 ;	genCast
   00B5 0Er1B               265 	ld	c,#<_g_Sprite
   00B7 06s00               266 	ld	b,#>_g_Sprite
                            267 ;	genIpush
                            268 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00B9 C5                  269 	push	bc
                            270 ;	genIpush
   00BA 21 08 08            271 	ld	hl,#0x0808
   00BD E5                  272 	push	hl
                            273 ;	genIpush
   00BE 21 64 64            274 	ld	hl,#0x6464
   00C1 E5                  275 	push	hl
                            276 ;	genIpush
   00C2 3E 00               277 	ld	a,#0x00
   00C4 F5                  278 	push	af
   00C5 33                  279 	inc	sp
                            280 ;	genCall
   00C6 CDrE4s03            281 	call	_HMMC
   00C9 F1                  282 	pop	af
   00CA F1                  283 	pop	af
   00CB F1                  284 	pop	af
   00CC 33                  285 	inc	sp
                            286 ;carwar.c:241: if((i = Joystick(0) | Joystick(1) | Joystick(2)) != 0)
                            287 ;	genIpush
                            288 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   00CD 3E 00               289 	ld	a,#0x00
   00CF F5                  290 	push	af
   00D0 33                  291 	inc	sp
                            292 ;	genCall
   00D1 CDr60s03            293 	call	_Joystick
   00D4 4D                  294 	ld	c,l
   00D5 33                  295 	inc	sp
                            296 ;	genIpush
                            297 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 1 deSending: 0
   00D6 C5                  298 	push	bc
   00D7 3E 01               299 	ld	a,#0x01
   00D9 F5                  300 	push	af
   00DA 33                  301 	inc	sp
                            302 ;	genCall
   00DB CDr60s03            303 	call	_Joystick
   00DE 45                  304 	ld	b,l
   00DF 33                  305 	inc	sp
   00E0 78                  306 	ld	a,b
   00E1 C1                  307 	pop	bc
                            308 ;	genOr
   00E2 47                  309 	ld	b,a
   00E3 B1                  310 	or	a,c
   00E4 4F                  311 	ld	c,a
                            312 ;	genIpush
                            313 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 1 deSending: 0
   00E5 C5                  314 	push	bc
   00E6 3E 02               315 	ld	a,#0x02
   00E8 F5                  316 	push	af
   00E9 33                  317 	inc	sp
                            318 ;	genCall
   00EA CDr60s03            319 	call	_Joystick
   00ED 45                  320 	ld	b,l
   00EE 33                  321 	inc	sp
   00EF 78                  322 	ld	a,b
   00F0 C1                  323 	pop	bc
                            324 ;	genOr
   00F1 47                  325 	ld	b,a
   00F2 B1                  326 	or	a,c
                            327 ;	genCast
   00F3 4F                  328 	ld	c,a
   00F4 17                  329 	rla	
   00F5 9F                  330 	sbc	a,a
   00F6 47                  331 	ld	b,a
                            332 ;	genAssign
   00F7 59                  333 	ld	e,c
   00F8 50                  334 	ld	d,b
                            335 ;	genIfx
   00F9 79                  336 	ld	a,c
   00FA B0                  337 	or	a,b
   00FB CAr6As01            338 	jp	Z,00111$
                            339 ;carwar.c:243: switch (i)
                            340 ;	genCmpLt
   00FE 7B                  341 	ld	a,e
   00FF D6 01               342 	sub	a,#0x01
   0101 7A                  343 	ld	a,d
   0102 DE 00               344 	sbc	a,#0x00
   0104 FAr6As01            345 	jp	M,00111$
                            346 ;	genCmpGt
   0107 3E 08               347 	ld	a,#0x08
   0109 93                  348 	sub	a,e
   010A 3E 00               349 	ld	a,#0x00
   010C 9A                  350 	sbc	a,d
   010D FAr6As01            351 	jp	M,00111$
                            352 ;	genMinus
   0110 7B                  353 	ld	a,e
   0111 C6 FF               354 	add	a,#0xFF
   0113 4F                  355 	ld	c,a
                            356 ;	genJumpTab
   0114 D5                  357 	push	de
   0115 59                  358 	ld	e,c
   0116 16 00               359 	ld	d,#0x00
   0118 21r20s01            360 	ld	hl,#00146$
   011B 19                  361 	add	hl,de
   011C 19                  362 	add	hl,de
   011D 19                  363 	add	hl,de
   011E D1                  364 	pop	de
   011F E9                  365 	jp	(hl)
   0120                     366 00146$:
   0120 C3r38s01            367 	jp	00101$
   0123 C3r3Ds01            368 	jp	00102$
   0126 C3r45s01            369 	jp	00103$
   0129 C3r4As01            370 	jp	00104$
   012C C3r52s01            371 	jp	00105$
   012F C3r57s01            372 	jp	00106$
   0132 C3r5Fs01            373 	jp	00107$
   0135 C3r64s01            374 	jp	00108$
                            375 ;carwar.c:245: case 1: y--; break;
                            376 ;	genLabel
   0138                     377 00101$:
                            378 ;	genMinus
                            379 ;	AOP_STK for _MainLoop_y_1_1
   0138 DD 35 EF            380 	dec	-17(ix)
                            381 ;	genGoto
   013B 18 2D               382 	jr	00111$
                            383 ;carwar.c:246: case 2: y--; x++; break;
                            384 ;	genLabel
   013D                     385 00102$:
                            386 ;	genMinus
                            387 ;	AOP_STK for _MainLoop_y_1_1
   013D DD 35 EF            388 	dec	-17(ix)
                            389 ;	genPlus
                            390 ;	AOP_STK for _MainLoop_x_1_1
                            391 ;	genPlusIncr
   0140 DD 34 F0            392 	inc	-16(ix)
                            393 ;	genGoto
   0143 18 25               394 	jr	00111$
                            395 ;carwar.c:247: case 3: x++; break;
                            396 ;	genLabel
   0145                     397 00103$:
                            398 ;	genPlus
                            399 ;	AOP_STK for _MainLoop_x_1_1
                            400 ;	genPlusIncr
   0145 DD 34 F0            401 	inc	-16(ix)
                            402 ;	genGoto
   0148 18 20               403 	jr	00111$
                            404 ;carwar.c:248: case 4: y++; x++; break;
                            405 ;	genLabel
   014A                     406 00104$:
                            407 ;	genPlus
                            408 ;	AOP_STK for _MainLoop_y_1_1
                            409 ;	genPlusIncr
   014A DD 34 EF            410 	inc	-17(ix)
                            411 ;	genPlus
                            412 ;	AOP_STK for _MainLoop_x_1_1
                            413 ;	genPlusIncr
   014D DD 34 F0            414 	inc	-16(ix)
                            415 ;	genGoto
   0150 18 18               416 	jr	00111$
                            417 ;carwar.c:249: case 5: y++; break;
                            418 ;	genLabel
   0152                     419 00105$:
                            420 ;	genPlus
                            421 ;	AOP_STK for _MainLoop_y_1_1
                            422 ;	genPlusIncr
   0152 DD 34 EF            423 	inc	-17(ix)
                            424 ;	genGoto
   0155 18 13               425 	jr	00111$
                            426 ;carwar.c:250: case 6: y++; x--; break;
                            427 ;	genLabel
   0157                     428 00106$:
                            429 ;	genPlus
                            430 ;	AOP_STK for _MainLoop_y_1_1
                            431 ;	genPlusIncr
   0157 DD 34 EF            432 	inc	-17(ix)
                            433 ;	genMinus
                            434 ;	AOP_STK for _MainLoop_x_1_1
   015A DD 35 F0            435 	dec	-16(ix)
                            436 ;	genGoto
   015D 18 0B               437 	jr	00111$
                            438 ;carwar.c:251: case 7: x--; break;
                            439 ;	genLabel
   015F                     440 00107$:
                            441 ;	genMinus
                            442 ;	AOP_STK for _MainLoop_x_1_1
   015F DD 35 F0            443 	dec	-16(ix)
                            444 ;	genGoto
   0162 18 06               445 	jr	00111$
                            446 ;carwar.c:252: case 8: y--; x--; break;
                            447 ;	genLabel
   0164                     448 00108$:
                            449 ;	genMinus
                            450 ;	AOP_STK for _MainLoop_y_1_1
   0164 DD 35 EF            451 	dec	-17(ix)
                            452 ;	genMinus
                            453 ;	AOP_STK for _MainLoop_x_1_1
   0167 DD 35 F0            454 	dec	-16(ix)
                            455 ;carwar.c:253: }
                            456 ;	genLabel
   016A                     457 00111$:
                            458 ;carwar.c:281: for(i=0; i<10; i++) // rows
                            459 ;	genAssign
   016A 11 00 00            460 	ld	de,#0x0000
                            461 ;	genAssign
                            462 ;	AOP_STK for _MainLoop_i_1_1
   016D DD 36 ED 00         463 	ld	-19(ix),#0x00
   0171 DD 36 EE 00         464 	ld	-18(ix),#0x00
                            465 ;	genLabel
   0175                     466 00122$:
                            467 ;	genCmpLt
                            468 ;	AOP_STK for _MainLoop_i_1_1
   0175 DD 7E ED            469 	ld	a,-19(ix)
   0178 D6 0A               470 	sub	a,#0x0A
   017A DD 7E EE            471 	ld	a,-18(ix)
   017D DE 00               472 	sbc	a,#0x00
   017F F2r28s02            473 	jp	P,00145$
                            474 ;carwar.c:283: keyLine = GetKeyMatrixLine(i);
                            475 ;	genCast
                            476 ;	AOP_STK for _MainLoop_i_1_1
   0182 DD 4E ED            477 	ld	c,-19(ix)
                            478 ;	genIpush
                            479 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0185 79                  480 	ld	a,c
   0186 F5                  481 	push	af
   0187 33                  482 	inc	sp
                            483 ;	genCall
   0188 CDr86s03            484 	call	_GetKeyMatrixLine
   018B 4D                  485 	ld	c,l
   018C 33                  486 	inc	sp
                            487 ;	genAssign
   018D 59                  488 	ld	e,c
                            489 ;carwar.c:284: for(j=0; j<8; j++) // characters
                            490 ;	genAssign
                            491 ;	AOP_STK for _MainLoop_j_1_1
   018E DD 36 EB 00         492 	ld	-21(ix),#0x00
   0192 DD 36 EC 00         493 	ld	-20(ix),#0x00
                            494 ;	genLabel
   0196                     495 00118$:
                            496 ;	genCmpLt
                            497 ;	AOP_STK for _MainLoop_j_1_1
   0196 DD 7E EB            498 	ld	a,-21(ix)
   0199 D6 08               499 	sub	a,#0x08
   019B DD 7E EC            500 	ld	a,-20(ix)
   019E DE 00               501 	sbc	a,#0x00
   01A0 F2r17s02            502 	jp	P,00124$
                            503 ;carwar.c:286: if(keyLine & 1 << j)
                            504 ;	genLeftShift
                            505 ;	AOP_STK for _MainLoop_j_1_1
   01A3 DD 7E EB            506 	ld	a,-21(ix)
   01A6 3C                  507 	inc	a
                            508 ;	AOP_STK for _MainLoop_sloc0_1_0
   01A7 F5                  509 	push	af
   01A8 DD 36 E9 01         510 	ld	-23(ix),#0x01
   01AC DD 36 EA 00         511 	ld	-22(ix),#0x00
   01B0 F1                  512 	pop	af
   01B1 18 08               513 	jr	00148$
   01B3                     514 00147$:
   01B3 DD CB E9 26         515 	sla	-23(ix)
   01B7 DD CB EA 16         516 	rl	-22(ix)
   01BB                     517 00148$:
   01BB 3D                  518 	dec	a
   01BC 20 F5               519 	jr	NZ,00147$
                            520 ;	genCast
   01BE 4B                  521 	ld	c,e
   01BF 06 00               522 	ld	b,#0x00
                            523 ;	genAnd
                            524 ;	AOP_STK for _MainLoop_sloc0_1_0
   01C1 79                  525 	ld	a,c
   01C2 DD A6 E9            526 	and	a,-23(ix)
   01C5 4F                  527 	ld	c,a
   01C6 78                  528 	ld	a,b
   01C7 DD A6 EA            529 	and	a,-22(ix)
                            530 ;	genIfx
   01CA 47                  531 	ld	b,a
   01CB B1                  532 	or	a,c
   01CC 28 20               533 	jr	Z,00113$
                            534 ;carwar.c:287: DrawPoint8(10 + j, 10 + i, 0);
                            535 ;	genCast
                            536 ;	AOP_STK for _MainLoop_i_1_1
   01CE DD 4E ED            537 	ld	c,-19(ix)
                            538 ;	genPlus
                            539 ;	genPlusIncr
   01D1 79                  540 	ld	a,c
   01D2 C6 0A               541 	add	a,#0x0A
   01D4 4F                  542 	ld	c,a
                            543 ;	genCast
                            544 ;	AOP_STK for _MainLoop_j_1_1
   01D5 DD 46 EB            545 	ld	b,-21(ix)
                            546 ;	genPlus
                            547 ;	genPlusIncr
   01D8 78                  548 	ld	a,b
   01D9 C6 0A               549 	add	a,#0x0A
   01DB 47                  550 	ld	b,a
                            551 ;	genIpush
                            552 ; _saveRegsForCall: sendSetSize: 0 deInUse: 1 bcInUse: 0 deSending: 0
   01DC D5                  553 	push	de
   01DD 3E 00               554 	ld	a,#0x00
   01DF F5                  555 	push	af
   01E0 33                  556 	inc	sp
                            557 ;	genIpush
   01E1 79                  558 	ld	a,c
   01E2 F5                  559 	push	af
   01E3 33                  560 	inc	sp
                            561 ;	genIpush
   01E4 C5                  562 	push	bc
   01E5 33                  563 	inc	sp
                            564 ;	genCall
   01E6 CDrAAs02            565 	call	_DrawPoint8
   01E9 F1                  566 	pop	af
   01EA 33                  567 	inc	sp
   01EB D1                  568 	pop	de
                            569 ;	genGoto
   01EC 18 1E               570 	jr	00120$
                            571 ;	genLabel
   01EE                     572 00113$:
                            573 ;carwar.c:289: DrawPoint8(10 + j, 10 + i, 255);
                            574 ;	genCast
                            575 ;	AOP_STK for _MainLoop_i_1_1
   01EE DD 4E ED            576 	ld	c,-19(ix)
                            577 ;	genPlus
                            578 ;	genPlusIncr
   01F1 79                  579 	ld	a,c
   01F2 C6 0A               580 	add	a,#0x0A
   01F4 4F                  581 	ld	c,a
                            582 ;	genCast
                            583 ;	AOP_STK for _MainLoop_j_1_1
   01F5 DD 46 EB            584 	ld	b,-21(ix)
                            585 ;	genPlus
                            586 ;	genPlusIncr
   01F8 78                  587 	ld	a,b
   01F9 C6 0A               588 	add	a,#0x0A
   01FB 47                  589 	ld	b,a
                            590 ;	genIpush
                            591 ; _saveRegsForCall: sendSetSize: 0 deInUse: 1 bcInUse: 0 deSending: 0
   01FC D5                  592 	push	de
   01FD 3E FF               593 	ld	a,#0xFF
   01FF F5                  594 	push	af
   0200 33                  595 	inc	sp
                            596 ;	genIpush
   0201 79                  597 	ld	a,c
   0202 F5                  598 	push	af
   0203 33                  599 	inc	sp
                            600 ;	genIpush
   0204 C5                  601 	push	bc
   0205 33                  602 	inc	sp
                            603 ;	genCall
   0206 CDrAAs02            604 	call	_DrawPoint8
   0209 F1                  605 	pop	af
   020A 33                  606 	inc	sp
   020B D1                  607 	pop	de
                            608 ;	genLabel
   020C                     609 00120$:
                            610 ;carwar.c:284: for(j=0; j<8; j++) // characters
                            611 ;	genPlus
                            612 ;	AOP_STK for _MainLoop_j_1_1
                            613 ;	genPlusIncr
   020C DD 34 EB            614 	inc	-21(ix)
   020F 20 03               615 	jr	NZ,00149$
   0211 DD 34 EC            616 	inc	-20(ix)
   0214                     617 00149$:
                            618 ;	genGoto
   0214 C3r96s01            619 	jp	00118$
                            620 ;	genLabel
   0217                     621 00124$:
                            622 ;carwar.c:281: for(i=0; i<10; i++) // rows
                            623 ;	genPlus
                            624 ;	AOP_STK for _MainLoop_i_1_1
                            625 ;	genPlusIncr
   0217 DD 34 ED            626 	inc	-19(ix)
   021A 20 03               627 	jr	NZ,00150$
   021C DD 34 EE            628 	inc	-18(ix)
   021F                     629 00150$:
                            630 ;	genAssign
                            631 ;	AOP_STK for _MainLoop_i_1_1
   021F DD 5E ED            632 	ld	e,-19(ix)
   0222 DD 56 EE            633 	ld	d,-18(ix)
                            634 ;	genGoto
   0225 C3r75s01            635 	jp	00122$
                            636 ;	genLabel
   0228                     637 00145$:
                            638 ;	genAssign
                            639 ;	AOP_STK for _MainLoop_i_1_1
   0228 DD 5E ED            640 	ld	e,-19(ix)
   022B DD 56 EE            641 	ld	d,-18(ix)
                            642 ;carwar.c:295: for(j=0; j<256; j++) // characters
                            643 ;	genAssign
                            644 ;	AOP_STK for _MainLoop_j_1_1
   022E DD 36 EB 00         645 	ld	-21(ix),#0x00
   0232 DD 36 EC 00         646 	ld	-20(ix),#0x00
                            647 ;	genLabel
   0236                     648 00126$:
                            649 ;	genCmpLt
                            650 ;	AOP_STK for _MainLoop_j_1_1
   0236 DD 7E EB            651 	ld	a,-21(ix)
   0239 D6 00               652 	sub	a,#0x00
   023B DD 7E EC            653 	ld	a,-20(ix)
   023E DE 01               654 	sbc	a,#0x01
   0240 F2r98s00            655 	jp	P,00115$
                            656 ;carwar.c:297: DrawPoint8(j, i, j);
                            657 ;	genCast
                            658 ;	AOP_STK for _MainLoop_j_1_1
   0243 DD 4E EB            659 	ld	c,-21(ix)
                            660 ;	genCast
   0246 43                  661 	ld	b,e
                            662 ;	genIpush
                            663 ; _saveRegsForCall: sendSetSize: 0 deInUse: 1 bcInUse: 0 deSending: 0
   0247 D5                  664 	push	de
   0248 79                  665 	ld	a,c
   0249 F5                  666 	push	af
   024A 33                  667 	inc	sp
                            668 ;	genIpush
   024B C5                  669 	push	bc
   024C 33                  670 	inc	sp
                            671 ;	genIpush
   024D 79                  672 	ld	a,c
   024E F5                  673 	push	af
   024F 33                  674 	inc	sp
                            675 ;	genCall
   0250 CDrAAs02            676 	call	_DrawPoint8
   0253 F1                  677 	pop	af
   0254 33                  678 	inc	sp
   0255 D1                  679 	pop	de
                            680 ;carwar.c:295: for(j=0; j<256; j++) // characters
                            681 ;	genPlus
                            682 ;	AOP_STK for _MainLoop_j_1_1
                            683 ;	genPlusIncr
   0256 DD 34 EB            684 	inc	-21(ix)
   0259 20 03               685 	jr	NZ,00151$
   025B DD 34 EC            686 	inc	-20(ix)
   025E                     687 00151$:
                            688 ;	genGoto
   025E 18 D6               689 	jr	00126$
                            690 ;	genLabel
                            691 ;	genEndFunction
   0260 DD F9               692 	ld	sp,ix
   0262 DD E1               693 	pop	ix
   0264 C9                  694 	ret
   0265                     695 _MainLoop_end::
                            696 ;carwar.c:452: void SetScreen8()
                            697 ;	genLabel
                            698 ;	genFunction
                            699 ;	---------------------------------
                            700 ; Function SetScreen8
                            701 ; ---------------------------------
   0265                     702 _SetScreen8_start::
   0265                     703 _SetScreen8:
                            704 ;carwar.c:488: _endasm;
                            705 ;	genInline
                            706 	
                            707 	
                            708 	
                            709 	
   0265 3A DF F3            710 		 ld a,(#0xF3DF)
   0268 CB DF               711 		 set #3,a
   026A CB D7               712 		 set #2,a
   026C CB CF               713 		 set #1,a
   026E 32 DF F3            714 		 ld (#0xF3DF),a
                            715 	
   0271 F3                  716 		 di
                            717 	
   0272 D3 99               718 		 out (#0x99),a
   0274 3E 80               719 		 ld a,#(0x80+0)
   0276 D3 99               720 		 out (#0x99),a
                            721 	
                            722 	
   0278 3A E0 F3            723 		 ld a,(#0xF3E0)
   027B CB A7               724 		 res #4,a
   027D CB 9F               725 		 res #3,a
   027F 32 E0 F3            726 		 ld (#0xF3E0),a
                            727 	
   0282 D3 99               728 		 out (#0x99),a
   0284 3E 81               729 		 ld a,#(0x80+1)
   0286 D3 99               730 		 out (#0x99),a
                            731 	
                            732 	
   0288 3E 1F               733 		 ld a,#0x1F
   028A D3 99               734 		 out (#0x99),a
   028C 3E 82               735 		 ld a,#(0x80+2)
   028E D3 99               736 		 out (#0x99),a
                            737 	
   0290 FB                  738 		 ei
                            739 	
                            740 		
                            741 ;	genLabel
                            742 ;	genEndFunction
   0291 C9                  743 	ret
   0292                     744 _SetScreen8_end::
                            745 ;carwar.c:494: void SetPage8(i8 page)
                            746 ;	genLabel
                            747 ;	genFunction
                            748 ;	---------------------------------
                            749 ; Function SetPage8
                            750 ; ---------------------------------
   0292                     751 _SetPage8_start::
   0292                     752 _SetPage8:
   0292 DD E5               753 	push	ix
   0294 DD 21 00 00         754 	ld	ix,#0
   0298 DD 39               755 	add	ix,sp
                            756 ;carwar.c:508: _endasm;
                            757 ;	genInline
                            758 	
                            759 	
   029A DD 7E 04            760 		 ld a,4(ix)
   029D F6 1F               761 		 or #0x1F
   029F F3                  762 		 di
   02A0 D3 99               763 		 out (#0x99),a
   02A2 3E 82               764 		 ld a,#(0x80+2)
   02A4 D3 99               765 		 out (#0x99),a
   02A6 FB                  766 		 ei
                            767 	
                            768 		
                            769 ;	genLabel
                            770 ;	genEndFunction
   02A7 DD E1               771 	pop	ix
   02A9 C9                  772 	ret
   02AA                     773 _SetPage8_end::
                            774 ;carwar.c:514: void DrawPoint8(char posX, char posY, char color)
                            775 ;	genLabel
                            776 ;	genFunction
                            777 ;	---------------------------------
                            778 ; Function DrawPoint8
                            779 ; ---------------------------------
   02AA                     780 _DrawPoint8_start::
   02AA                     781 _DrawPoint8:
   02AA DD E5               782 	push	ix
   02AC DD 21 00 00         783 	ld	ix,#0
   02B0 DD 39               784 	add	ix,sp
                            785 ;carwar.c:518: WaitForVDP();
                            786 ;	genCall
                            787 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   02B2 CDr48s03            788 	call	_WaitForVDP
                            789 ;carwar.c:566: _endasm;
                            790 ;	genInline
                            791 	
                            792 	
                            793 	
                            794 	
   02B5 DD 7E 04            795 		 ld a,4(ix)
   02B8 F3                  796 		 di
   02B9 D3 99               797 		 out (#0x99),a
   02BB 3E A4               798 		 ld a,#(0x80+36)
   02BD D3 99               799 		 out (#0x99),a
                            800 	
   02BF AF                  801 		 xor a
   02C0 D3 99               802 		 out (#0x99),a
   02C2 3E A5               803 		 ld a,#(0x80+37)
   02C4 D3 99               804 		 out (#0x99),a
                            805 	
                            806 	
   02C6 DD 7E 05            807 		 ld a,5(ix)
   02C9 D3 99               808 		 out (#0x99),a
   02CB 3E A6               809 		 ld a,#(0x80+38)
   02CD D3 99               810 		 out (#0x99),a
                            811 	
   02CF AF                  812 		 xor a
   02D0 D3 99               813 		 out (#0x99),a
   02D2 3E A7               814 		 ld a,#(0x80+39)
   02D4 D3 99               815 		 out (#0x99),a
                            816 	
                            817 	
   02D6 DD 7E 06            818 		 ld a,6(ix)
   02D9 D3 99               819 		 out (#0x99),a
   02DB 3E AC               820 		 ld a,#(0x80+44)
   02DD D3 99               821 		 out (#0x99),a
                            822 	
                            823 	
   02DF AF                  824 		 xor a
   02E0 D3 99               825 		 out (#0x99),a
   02E2 3E AD               826 		 ld a,#(0x80+45)
   02E4 D3 99               827 		 out (#0x99),a
                            828 	
                            829 	
   02E6 3E 50               830 		 ld a,#0x50
   02E8 D3 99               831 		 out (#0x99),a
   02EA 3E AE               832 		 ld a,#(0x80+46)
   02EC D3 99               833 		 out (#0x99),a
                            834 	
   02EE FB                  835 		 ei
                            836 	
                            837 		
                            838 ;	genLabel
                            839 ;	genEndFunction
   02EF DD E1               840 	pop	ix
   02F1 C9                  841 	ret
   02F2                     842 _DrawPoint8_end::
                            843 ;carwar.c:668: void DrawLine8(char posX1, char posY1, char posX2, char posY2, char color)
                            844 ;	genLabel
                            845 ;	genFunction
                            846 ;	---------------------------------
                            847 ; Function DrawLine8
                            848 ; ---------------------------------
   02F2                     849 _DrawLine8_start::
   02F2                     850 _DrawLine8:
   02F2 DD E5               851 	push	ix
   02F4 DD 21 00 00         852 	ld	ix,#0
   02F8 DD 39               853 	add	ix,sp
                            854 ;carwar.c:672: WaitForVDP();
                            855 ;	genCall
                            856 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
                            857 ;	genLabel
                            858 ;	genEndFunction
   02FA DD E1               859 	pop	ix
   02FC C3r48s03            860 	jp	_WaitForVDP
   02FF                     861 _DrawLine8_end::
                            862 ;carwar.c:806: void VPDCommand(int address)
                            863 ;	genLabel
                            864 ;	genFunction
                            865 ;	---------------------------------
                            866 ; Function VPDCommand
                            867 ; ---------------------------------
   02FF                     868 _VPDCommand_start::
   02FF                     869 _VPDCommand:
   02FF DD E5               870 	push	ix
   0301 DD 21 00 00         871 	ld	ix,#0
   0305 DD 39               872 	add	ix,sp
                            873 ;carwar.c:810: WaitForVDP();
                            874 ;	genCall
                            875 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0307 CDr48s03            876 	call	_WaitForVDP
                            877 ;carwar.c:841: _endasm;
                            878 ;	genInline
                            879 	
                            880 	
   030A DD 6E 04            881 		 ld l,4(ix)
   030D DD 66 05            882 		 ld h,5(ix)
                            883 	
                            884 	
   0310 3E 20               885 		 ld a,#32
   0312 F3                  886 		 di
   0313 D3 99               887 		 out (#0x99),a
   0315 3E 91               888 		 ld a,#(0x80+17)
   0317 D3 99               889 		 out (#0x99),a
   0319 0E 9B               890 		 ld c,#0x99 +#2
   031B ED A3               891 		 outi
   031D ED A3               892 		 outi
   031F ED A3               893 		 outi
   0321 ED A3               894 		 outi
   0323 ED A3               895 		 outi
   0325 ED A3               896 		 outi
   0327 ED A3               897 		 outi
   0329 ED A3               898 		 outi
   032B ED A3               899 		 outi
   032D ED A3               900 		 outi
   032F ED A3               901 		 outi
   0331 ED A3               902 		 outi
   0333 ED A3               903 		 outi
   0335 ED A3               904 		 outi
   0337 FB                  905 		 ei
   0338 ED A3               906 		 outi
                            907 	
                            908 		
                            909 ;	genLabel
                            910 ;	genEndFunction
   033A DD E1               911 	pop	ix
   033C C9                  912 	ret
   033D                     913 _VPDCommand_end::
                            914 ;carwar.c:847: void waitRetrace()
                            915 ;	genLabel
                            916 ;	genFunction
                            917 ;	---------------------------------
                            918 ; Function waitRetrace
                            919 ; ---------------------------------
   033D                     920 _waitRetrace_start::
   033D                     921 _waitRetrace:
                            922 ;carwar.c:859: _endasm;
                            923 ;	genInline
                            924 	
                            925 	
   033D F3                  926 		 di
   033E                     927 	 WAIT_RETRACE:
   033E DB 99               928 		 in a,(0x99)
   0340 E6 80               929 		 and #0x80
   0342 FE 00               930 		 cp #0
   0344 28 F8               931 		 jr z, WAIT_RETRACE
   0346 FB                  932 		 ei
                            933 	
                            934 		
                            935 ;	genLabel
                            936 ;	genEndFunction
   0347 C9                  937 	ret
   0348                     938 _waitRetrace_end::
                            939 ;carwar.c:865: void WaitForVDP()
                            940 ;	genLabel
                            941 ;	genFunction
                            942 ;	---------------------------------
                            943 ; Function WaitForVDP
                            944 ; ---------------------------------
   0348                     945 _WaitForVDP_start::
   0348                     946 _WaitForVDP:
                            947 ;carwar.c:886: _endasm;
                            948 ;	genInline
                            949 	
                            950 	
                            951 	
   0348 3E 02               952 		 ld a,#2
   034A F3                  953 		 di
   034B D3 99               954 		 out (#0x99),a
   034D 3E 8F               955 		 ld a,#(0x80+15)
   034F D3 99               956 		 out (#0x99),a
   0351                     957 	 WAIT_VDP:
   0351 00                  958 		 nop
   0352 DB 99               959 		 in a,(#0x99)
   0354 1F                  960 		 rra
   0355 38 FA               961 		 jr c,WAIT_VDP
   0357 AF                  962 		 xor a
   0358 D3 99               963 		 out (#0x99),a
   035A 3E 8F               964 		 ld a,#(0x80+15)
   035C D3 99               965 		 out (#0x99),a
   035E FB                  966 		 ei
                            967 	
                            968 		
                            969 ;	genLabel
                            970 ;	genEndFunction
   035F C9                  971 	ret
   0360                     972 _WaitForVDP_end::
                            973 ;carwar.c:890: char Joystick(char n)
                            974 ;	genLabel
                            975 ;	genFunction
                            976 ;	---------------------------------
                            977 ; Function Joystick
                            978 ; ---------------------------------
   0360                     979 _Joystick_start::
   0360                     980 _Joystick:
   0360 DD E5               981 	push	ix
   0362 DD 21 00 00         982 	ld	ix,#0
   0366 DD 39               983 	add	ix,sp
                            984 ;carwar.c:897: _endasm;
                            985 ;	genInline
                            986 	
   0368 DD 7E 04            987 		 ld a,4(ix)
   036B CD D5 00            988 		 call 0x00d5
   036E 6F                  989 		 ld l,a
                            990 		
                            991 ;	genLabel
                            992 ;	genEndFunction
   036F DD E1               993 	pop	ix
   0371 C9                  994 	ret
   0372                     995 _Joystick_end::
                            996 ;carwar.c:901: char Joytrig(char n)
                            997 ;	genLabel
                            998 ;	genFunction
                            999 ;	---------------------------------
                           1000 ; Function Joytrig
                           1001 ; ---------------------------------
   0372                    1002 _Joytrig_start::
   0372                    1003 _Joytrig:
   0372 DD E5              1004 	push	ix
   0374 DD 21 00 00        1005 	ld	ix,#0
   0378 DD 39              1006 	add	ix,sp
                           1007 ;carwar.c:909: _endasm;
                           1008 ;	genInline
                           1009 	
   037A DD 7E 04           1010 		 ld a,4(ix)
   037D CD D8 00           1011 		 call 0x00d8
   0380 26 00              1012 		 ld h,#0x00
   0382 6F                 1013 		 ld l,a
                           1014 		
                           1015 ;	genLabel
                           1016 ;	genEndFunction
   0383 DD E1              1017 	pop	ix
   0385 C9                 1018 	ret
   0386                    1019 _Joytrig_end::
                           1020 ;carwar.c:913: u8 GetKeyMatrixLine(u8 n)
                           1021 ;	genLabel
                           1022 ;	genFunction
                           1023 ;	---------------------------------
                           1024 ; Function GetKeyMatrixLine
                           1025 ; ---------------------------------
   0386                    1026 _GetKeyMatrixLine_start::
   0386                    1027 _GetKeyMatrixLine:
   0386 DD E5              1028 	push	ix
   0388 DD 21 00 00        1029 	ld	ix,#0
   038C DD 39              1030 	add	ix,sp
                           1031 ;carwar.c:920: _endasm;
                           1032 ;	genInline
                           1033 	
   038E DD 7E 04           1034 		 ld a,4(ix)
   0391 CD 41 01           1035 		 call 0x0141
   0394 6F                 1036 		 ld l,a
                           1037 		
                           1038 ;	genLabel
                           1039 ;	genEndFunction
   0395 DD E1              1040 	pop	ix
   0397 C9                 1041 	ret
   0398                    1042 _GetKeyMatrixLine_end::
                           1043 ;carwar.c:923: void SetTo50Hz()
                           1044 ;	genLabel
                           1045 ;	genFunction
                           1046 ;	---------------------------------
                           1047 ; Function SetTo50Hz
                           1048 ; ---------------------------------
   0398                    1049 _SetTo50Hz_start::
   0398                    1050 _SetTo50Hz:
                           1051 ;carwar.c:925: WaitForVDP();
                           1052 ;	genCall
                           1053 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0398 CDr48s03           1054 	call	_WaitForVDP
                           1055 ;carwar.c:937: _endasm;
                           1056 ;	genInline
                           1057 	
                           1058 	
   039B 3E 02              1059 		 ld a,#2
   039D F3                 1060 		 di
   039E D3 99              1061 		 out (#0x99),a ;
                           1062 	
   03A0 3E 89              1063 		 ld a,#(0x80+9)
   03A2 D3 99              1064 		 out (#0x99),a ;
                           1065 	
   03A4 FB                 1066 		 ei
                           1067 		
                           1068 ;	genLabel
                           1069 ;	genEndFunction
   03A5 C9                 1070 	ret
   03A6                    1071 _SetTo50Hz_end::
                           1072 ;carwar.c:940: void SetTo60Hz()
                           1073 ;	genLabel
                           1074 ;	genFunction
                           1075 ;	---------------------------------
                           1076 ; Function SetTo60Hz
                           1077 ; ---------------------------------
   03A6                    1078 _SetTo60Hz_start::
   03A6                    1079 _SetTo60Hz:
                           1080 ;carwar.c:942: WaitForVDP();
                           1081 ;	genCall
                           1082 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   03A6 CDr48s03           1083 	call	_WaitForVDP
                           1084 ;carwar.c:954: _endasm;
                           1085 ;	genInline
                           1086 	
                           1087 	
   03A9 3E 00              1088 		 ld a,#0
   03AB F3                 1089 		 di
   03AC D3 99              1090 		 out (#0x99),a ;
                           1091 	
   03AE 3E 89              1092 		 ld a,#(0x80+9)
   03B0 D3 99              1093 		 out (#0x99),a ;
                           1094 	
   03B2 FB                 1095 		 ei
                           1096 		
                           1097 ;	genLabel
                           1098 ;	genEndFunction
   03B3 C9                 1099 	ret
   03B4                    1100 _SetTo60Hz_end::
                           1101 ;carwar.c:960: void WriteToVRAM8(i16 addr, u8 value)
                           1102 ;	genLabel
                           1103 ;	genFunction
                           1104 ;	---------------------------------
                           1105 ; Function WriteToVRAM8
                           1106 ; ---------------------------------
   03B4                    1107 _WriteToVRAM8_start::
   03B4                    1108 _WriteToVRAM8:
   03B4 DD E5              1109 	push	ix
   03B6 DD 21 00 00        1110 	ld	ix,#0
   03BA DD 39              1111 	add	ix,sp
                           1112 ;carwar.c:964: WaitForVDP();
                           1113 ;	genCall
                           1114 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   03BC CDr48s03           1115 	call	_WaitForVDP
                           1116 ;carwar.c:991: _endasm;
                           1117 ;	genInline
                           1118 	
                           1119 		 ;
   03BF DD 7E 05           1120 		 ld a,5(ix) ;
   03C2 E6 C0              1121 		 and #0xC0 ;
   03C4 17                 1122 		       rla
   03C5 17                 1123 		       rla
   03C6 F3                 1124 		 di
   03C7 D3 99              1125 		 out (#0x99),a
   03C9 3E 8E              1126 		 ld a,#(0x80+14)
   03CB D3 99              1127 		 out (#0x99),a
                           1128 	
   03CD DD 7E 04           1129 		 ld a,4(ix) ;
   03D0 D3 99              1130 		 out (#0x99),a
                           1131 	
   03D2 DD 7E 05           1132 		 ld a,5(ix) ;
   03D5 E6 3F              1133 		 and #0x3F ;
   03D7 F6 40              1134 		 or #0x40 ;
   03D9 D3 99              1135 		 out (#0x99),a
                           1136 	
                           1137 		 ;
   03DB DD 7E 06           1138 		 ld a,6(ix)
   03DE D3 98              1139 		 out (#0x98),a
                           1140 	
   03E0 FB                 1141 		 ei
                           1142 		
                           1143 ;	genLabel
                           1144 ;	genEndFunction
   03E1 DD E1              1145 	pop	ix
   03E3 C9                 1146 	ret
   03E4                    1147 _WriteToVRAM8_end::
                           1148 ;carwar.c:1098: void HMMC(u8 page, u8 dx, u8 dy, u8 nx, u8 ny, u16 ram)
                           1149 ;	genLabel
                           1150 ;	genFunction
                           1151 ;	---------------------------------
                           1152 ; Function HMMC
                           1153 ; ---------------------------------
   03E4                    1154 _HMMC_start::
   03E4                    1155 _HMMC:
   03E4 DD E5              1156 	push	ix
   03E6 DD 21 00 00        1157 	ld	ix,#0
   03EA DD 39              1158 	add	ix,sp
   03EC 21 ED FF           1159 	ld	hl,#-19
   03EF 39                 1160 	add	hl,sp
   03F0 F9                 1161 	ld	sp,hl
                           1162 ;carwar.c:1104: buffer.DX = dx;
                           1163 ;	genAddrOf
   03F1 21 04 00           1164 	ld	hl,#0x0004
   03F4 39                 1165 	add	hl,sp
   03F5 4D                 1166 	ld	c,l
   03F6 44                 1167 	ld	b,h
                           1168 ;	genPlus
                           1169 ;	AOP_STK for _HMMC_sloc0_1_0
                           1170 ;	genPlusIncr
   03F7 79                 1171 	ld	a,c
   03F8 C6 04              1172 	add	a,#0x04
   03FA DD 77 EF           1173 	ld	-17(ix),a
   03FD 78                 1174 	ld	a,b
   03FE CE 00              1175 	adc	a,#0x00
   0400 DD 77 F0           1176 	ld	-16(ix),a
                           1177 ;	genCast
                           1178 ;	AOP_STK for 
   0403 DD 5E 05           1179 	ld	e,5(ix)
   0406 16 00              1180 	ld	d,#0x00
                           1181 ;	genAssign (pointer)
                           1182 ;	AOP_STK for _HMMC_sloc0_1_0
                           1183 ;	isBitvar = 0
   0408 DD 6E EF           1184 	ld	l,-17(ix)
   040B DD 66 F0           1185 	ld	h,-16(ix)
   040E 73                 1186 	ld	(hl),e
   040F 23                 1187 	inc	hl
   0410 72                 1188 	ld	(hl),d
                           1189 ;carwar.c:1105: buffer.DY = dy /*+ (page * 512)*/;
                           1190 ;	genPlus
                           1191 ;	AOP_STK for _HMMC_sloc1_1_0
                           1192 ;	genPlusIncr
   0411 79                 1193 	ld	a,c
   0412 C6 06              1194 	add	a,#0x06
   0414 DD 77 ED           1195 	ld	-19(ix),a
   0417 78                 1196 	ld	a,b
   0418 CE 00              1197 	adc	a,#0x00
   041A DD 77 EE           1198 	ld	-18(ix),a
                           1199 ;	genCast
                           1200 ;	AOP_STK for 
   041D DD 5E 06           1201 	ld	e,6(ix)
   0420 16 00              1202 	ld	d,#0x00
                           1203 ;	genAssign (pointer)
                           1204 ;	AOP_STK for _HMMC_sloc1_1_0
                           1205 ;	isBitvar = 0
   0422 DD 6E ED           1206 	ld	l,-19(ix)
   0425 DD 66 EE           1207 	ld	h,-18(ix)
   0428 73                 1208 	ld	(hl),e
   0429 23                 1209 	inc	hl
   042A 72                 1210 	ld	(hl),d
                           1211 ;carwar.c:1106: buffer.NX = nx;
                           1212 ;	genPlus
                           1213 ;	AOP_STK for _HMMC_sloc1_1_0
                           1214 ;	genPlusIncr
   042B 79                 1215 	ld	a,c
   042C C6 08              1216 	add	a,#0x08
   042E DD 77 ED           1217 	ld	-19(ix),a
   0431 78                 1218 	ld	a,b
   0432 CE 00              1219 	adc	a,#0x00
   0434 DD 77 EE           1220 	ld	-18(ix),a
                           1221 ;	genCast
                           1222 ;	AOP_STK for 
   0437 DD 5E 07           1223 	ld	e,7(ix)
   043A 16 00              1224 	ld	d,#0x00
                           1225 ;	genAssign (pointer)
                           1226 ;	AOP_STK for _HMMC_sloc1_1_0
                           1227 ;	isBitvar = 0
   043C DD 6E ED           1228 	ld	l,-19(ix)
   043F DD 66 EE           1229 	ld	h,-18(ix)
   0442 73                 1230 	ld	(hl),e
   0443 23                 1231 	inc	hl
   0444 72                 1232 	ld	(hl),d
                           1233 ;carwar.c:1107: buffer.NY = ny;
                           1234 ;	genPlus
                           1235 ;	AOP_STK for _HMMC_sloc1_1_0
                           1236 ;	genPlusIncr
   0445 79                 1237 	ld	a,c
   0446 C6 0A              1238 	add	a,#0x0A
   0448 DD 77 ED           1239 	ld	-19(ix),a
   044B 78                 1240 	ld	a,b
   044C CE 00              1241 	adc	a,#0x00
   044E DD 77 EE           1242 	ld	-18(ix),a
                           1243 ;	genCast
                           1244 ;	AOP_STK for 
   0451 DD 5E 08           1245 	ld	e,8(ix)
   0454 16 00              1246 	ld	d,#0x00
                           1247 ;	genAssign (pointer)
                           1248 ;	AOP_STK for _HMMC_sloc1_1_0
                           1249 ;	isBitvar = 0
   0456 DD 6E ED           1250 	ld	l,-19(ix)
   0459 DD 66 EE           1251 	ld	h,-18(ix)
   045C 73                 1252 	ld	(hl),e
   045D 23                 1253 	inc	hl
   045E 72                 1254 	ld	(hl),d
                           1255 ;carwar.c:1108: buffer.CLR = ((u8*)ram)[0];
                           1256 ;	genPlus
                           1257 ;	AOP_STK for _HMMC_sloc1_1_0
                           1258 ;	genPlusIncr
   045F 79                 1259 	ld	a,c
   0460 C6 0C              1260 	add	a,#0x0C
   0462 DD 77 ED           1261 	ld	-19(ix),a
   0465 78                 1262 	ld	a,b
   0466 CE 00              1263 	adc	a,#0x00
   0468 DD 77 EE           1264 	ld	-18(ix),a
                           1265 ;	genCast
                           1266 ;	AOP_STK for 
   046B DD 5E 09           1267 	ld	e,9(ix)
   046E DD 56 0A           1268 	ld	d,10(ix)
                           1269 ;	genPointerGet
   0471 1A                 1270 	ld	a,(de)
                           1271 ;	genAssign (pointer)
                           1272 ;	AOP_STK for _HMMC_sloc1_1_0
                           1273 ;	isBitvar = 0
   0472 DD 6E ED           1274 	ld	l,-19(ix)
   0475 DD 66 EE           1275 	ld	h,-18(ix)
   0478 77                 1276 	ld	(hl),a
                           1277 ;carwar.c:1109: buffer.ARG = 0;
                           1278 ;	genPlus
                           1279 ;	genPlusIncr
   0479 79                 1280 	ld	a,c
   047A C6 0D              1281 	add	a,#0x0D
   047C 5F                 1282 	ld	e,a
   047D 78                 1283 	ld	a,b
   047E CE 00              1284 	adc	a,#0x00
   0480 57                 1285 	ld	d,a
                           1286 ;	genAssign (pointer)
                           1287 ;	isBitvar = 0
   0481 3E 00              1288 	ld	a,#0x00
   0483 12                 1289 	ld	(de),a
                           1290 ;carwar.c:1110: buffer.CMD = 0xF0;
                           1291 ;	genPlus
                           1292 ;	genPlusIncr
   0484 79                 1293 	ld	a,c
   0485 C6 0E              1294 	add	a,#0x0E
   0487 4F                 1295 	ld	c,a
   0488 78                 1296 	ld	a,b
   0489 CE 00              1297 	adc	a,#0x00
   048B 47                 1298 	ld	b,a
                           1299 ;	genAssign (pointer)
                           1300 ;	isBitvar = 0
   048C 3E F0              1301 	ld	a,#0xF0
   048E 02                 1302 	ld	(bc),a
                           1303 ;carwar.c:1111: SetupHMMC((u16)&buffer.DX);
                           1304 ;	genAssign
                           1305 ;	AOP_STK for _HMMC_sloc0_1_0
   048F DD 4E EF           1306 	ld	c,-17(ix)
   0492 DD 46 F0           1307 	ld	b,-16(ix)
                           1308 ;	genCast
                           1309 ;	genIpush
                           1310 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   0495 C5                 1311 	push	bc
                           1312 ;	genCall
   0496 CDrCCs04           1313 	call	_SetupHMMC
   0499 F1                 1314 	pop	af
                           1315 ;carwar.c:1163: _endasm;
                           1316 ;	genInline
                           1317 	
                           1318 	
   049A DD 6E 09           1319 		 ld l,9(ix)
   049D DD 66 0A           1320 		 ld h,10(ix)
                           1321 	
   04A0 F3                 1322 		 di
                           1323 	
   04A1                    1324 	 SEND_NEXT_COLOR:
                           1325 	
   04A1 23                 1326 		 inc hl
                           1327 	
                           1328 		 ;
                           1329 		 ;
   04A2 7E                 1330 		 ld a,(hl)
   04A3 D3 99              1331 		 out (#0x99),a
   04A5 3E AC              1332 		 ld a,#(0x80+44)
   04A7 D3 99              1333 		 out (#0x99),a
                           1334 	
   04A9                    1335 	 WAIT_REG2:
                           1336 	
                           1337 		 ;
                           1338 		 ;
   04A9 3E 02              1339 		 ld a,#2
   04AB D3 99              1340 		 out (#0x99),a
   04AD 3E 8F              1341 		 ld a,#(0x80+15)
   04AF D3 99              1342 		 out (#0x99),a
                           1343 	
                           1344 		 ;
   04B1 00                 1345 		 nop
   04B2 DB 99              1346 		 in a,(#0x99)
   04B4 47                 1347 		 ld b,a ;
   04B5 1F                 1348 		 rra ;
   04B6 30 07              1349 		 jr nc,COLOR_COPY_END
                           1350 	
                           1351 		 ;
                           1352 		 ;
   04B8 78                 1353 		 ld a,b ;
   04B9 17                 1354 		 rla ;
   04BA 30 ED              1355 		 jr nc,WAIT_REG2
   04BC C3rA1s04           1356 		 jp SEND_NEXT_COLOR
                           1357 	
   04BF                    1358 	 COLOR_COPY_END:
                           1359 	
                           1360 		 ;
   04BF AF                 1361 		 xor a
   04C0 D3 99              1362 		 out (#0x99),a
   04C2 3E 8F              1363 		 ld a,#(0x80+15)
   04C4 D3 99              1364 		 out (#0x99),a
                           1365 	
   04C6 FB                 1366 		 ei
                           1367 	
                           1368 		
                           1369 ;	genLabel
                           1370 ;	genEndFunction
   04C7 DD F9              1371 	ld	sp,ix
   04C9 DD E1              1372 	pop	ix
   04CB C9                 1373 	ret
   04CC                    1374 _HMMC_end::
                           1375 ;carwar.c:1186: void SetupHMMC(u16 address)
                           1376 ;	genLabel
                           1377 ;	genFunction
                           1378 ;	---------------------------------
                           1379 ; Function SetupHMMC
                           1380 ; ---------------------------------
   04CC                    1381 _SetupHMMC_start::
   04CC                    1382 _SetupHMMC:
   04CC DD E5              1383 	push	ix
   04CE DD 21 00 00        1384 	ld	ix,#0
   04D2 DD 39              1385 	add	ix,sp
                           1386 ;carwar.c:1190: WaitForVDP();
                           1387 ;	genCall
                           1388 ; _saveRegsForCall: sendSetSize: 0 deInUse: 0 bcInUse: 0 deSending: 0
   04D4 CDr48s03           1389 	call	_WaitForVDP
                           1390 ;carwar.c:1216: _endasm;
                           1391 ;	genInline
                           1392 	
                           1393 	
   04D7 DD 6E 04           1394 		 ld l,4(ix)
   04DA DD 66 05           1395 		 ld h,5(ix)
                           1396 		 ;
   04DD 3E 24              1397 		 ld a,#36 ;
   04DF F3                 1398 		 di
   04E0 D3 99              1399 		 out (#0x99),a
   04E2 3E 91              1400 		 ld a,#(0x80+17)
   04E4 D3 99              1401 		 out (#0x99),a ;
   04E6 0E 9B              1402 		 ld c,#0x99 +#2 ;
   04E8 ED A3              1403 		 outi
   04EA ED A3              1404 		 outi
   04EC ED A3              1405 		 outi
   04EE ED A3              1406 		 outi
   04F0 ED A3              1407 		 outi
   04F2 ED A3              1408 		 outi
   04F4 ED A3              1409 		 outi
   04F6 ED A3              1410 		 outi
   04F8 ED A3              1411 		 outi
   04FA ED A3              1412 		 outi
   04FC FB                 1413 		 ei ;
   04FD ED A3              1414 		 outi
                           1415 	
                           1416 		
                           1417 ;	genLabel
                           1418 ;	genEndFunction
   04FF DD E1              1419 	pop	ix
   0501 C9                 1420 	ret
   0502                    1421 _SetupHMMC_end::
                           1422 	.area _CODE
                           1423 	.area _CABS
